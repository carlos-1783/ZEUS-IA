import{r as i,c as p,q as L,b as s,e,n as z,t as a,g as y,L as k,M as _,P as D,G as M,o}from"./vendor-517526e0.js";import{u as N}from"./index-40046b22.js";const V={class:"max-w-4xl mx-auto p-6"},B={class:"bg-white shadow rounded-lg p-6 mb-6"},P={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},S={key:0},R={class:"text-lg font-semibold"},E={class:"text-sm font-mono truncate"},F={class:"text-sm font-mono truncate"},j={key:0,class:"bg-white shadow rounded-lg p-6 mb-6"},q=["disabled"],H={key:0},U={key:1,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},G={key:0,class:"mt-4 p-3 bg-red-50 text-red-700 rounded-md"},I={key:1,class:"space-y-6"},J={class:"bg-white shadow rounded-lg p-6"},O={key:0,class:"bg-gray-50 p-4 rounded-md"},Y={class:"text-sm overflow-x-auto"},K={key:1,class:"text-center py-4"},Q={key:2,class:"text-center py-4"},W={class:"mt-4"},X=["disabled"],Z={key:0},$={key:1,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ee={class:"bg-white shadow rounded-lg p-6"},te={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},se=["disabled"],oe={key:0},le={key:1,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ae={__name:"AuthTest",setup(re){M();const r=N(),n=i({email:"test@example.com",password:"password123"}),f=i(!1),g=i(!1),d=i(!1),u=i(""),c=i(null),m=p(()=>r.isAuthenticated),h=p(()=>r.user),w=p(()=>r.accessToken),x=p(()=>r.refreshToken),C=async()=>{try{f.value=!0,u.value="";const l=await r.login(n.value.email,n.value.password);l.success?n.value={email:"",password:""}:u.value=l.error||"Login failed"}catch{u.value="An error occurred during login"}finally{f.value=!1}},A=async()=>{try{await r.logout(),c.value=null}catch{}},T=async()=>{try{g.value=!0,await r.refreshAccessToken()}catch{}finally{g.value=!1}},b=async()=>{try{d.value=!0;const l=await system.testProtectedEndpoint();c.value=l.data}catch{c.value={error:"Failed to fetch protected data"}}finally{d.value=!1}};return L(()=>{m.value&&b()}),(l,t)=>(o(),s("div",V,[t[17]||(t[17]=e("h1",{class:"text-2xl font-bold mb-6"},"Authentication Test",-1)),e("div",B,[t[6]||(t[6]=e("h2",{class:"text-lg font-medium mb-4"},"Authentication State",-1)),e("div",P,[e("div",null,[t[2]||(t[2]=e("p",{class:"text-sm font-medium text-gray-500"},"Is Authenticated",-1)),e("p",{class:z(["text-lg font-semibold",{"text-green-600":m.value,"text-red-600":!m.value}])},a(m.value?"Yes":"No"),3)]),h.value?(o(),s("div",S,[t[3]||(t[3]=e("p",{class:"text-sm font-medium text-gray-500"},"User",-1)),e("p",R,a(h.value.email),1)])):y("",!0),e("div",null,[t[4]||(t[4]=e("p",{class:"text-sm font-medium text-gray-500"},"Access Token",-1)),e("p",E,a(w.value?"••••••••"+w.value.slice(-8):"None"),1)]),e("div",null,[t[5]||(t[5]=e("p",{class:"text-sm font-medium text-gray-500"},"Refresh Token",-1)),e("p",F,a(x.value?"••••••••"+x.value.slice(-8):"None"),1)])])]),m.value?(o(),s("div",I,[e("div",J,[t[14]||(t[14]=e("h2",{class:"text-lg font-medium mb-4"},"Protected Data",-1)),c.value?(o(),s("div",O,[e("pre",Y,a(JSON.stringify(c.value,null,2)),1)])):d.value?(o(),s("div",K,t[11]||(t[11]=[e("p",null,"Loading protected data...",-1)]))):(o(),s("div",Q,t[12]||(t[12]=[e("p",null,"No data loaded. Click the button below to fetch protected data.",-1)]))),e("div",W,[e("button",{onClick:b,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",disabled:d.value},[d.value?(o(),s("svg",$,t[13]||(t[13]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(o(),s("span",Z,"Fetch Protected Data"))],8,X)])]),e("div",ee,[t[16]||(t[16]=e("h2",{class:"text-lg font-medium mb-4"},"Token Actions",-1)),e("div",te,[e("button",{onClick:T,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:g.value},[g.value?(o(),s("svg",le,t[15]||(t[15]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(o(),s("span",oe,"Refresh Token"))],8,se),e("button",{onClick:A,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"}," Logout ")])])])):(o(),s("div",j,[t[10]||(t[10]=e("h2",{class:"text-lg font-medium mb-4"},"Login",-1)),e("form",{onSubmit:D(C,["prevent"]),class:"space-y-4"},[e("div",null,[t[7]||(t[7]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),k(e("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=v=>n.value.email=v),type:"email",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[_,n.value.email]])]),e("div",null,[t[8]||(t[8]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Password",-1)),k(e("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=v=>n.value.password=v),type:"password",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[_,n.value.password]])]),e("div",null,[e("button",{type:"submit",class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",disabled:f.value},[f.value?(o(),s("svg",U,t[9]||(t[9]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(o(),s("span",H,"Login"))],8,q)])],32),u.value?(o(),s("div",G,a(u.value),1)):y("",!0)]))]))}};export{ae as default};
