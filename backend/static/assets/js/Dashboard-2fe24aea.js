import{p as R,r as p,c as E,x as A,q as B,y as q,o as l,b as d,e,t as g,n as h,z as F,k,g as D,C as U,A as Z,B as M,D as H,f as V,w as O,F as P,E as N,h as T,G,H as J,I as W}from"./vendor-3902db62.js";import{u as I,_ as S}from"./index-a7ef4e95.js";import{u as K}from"./WebSocketService-cc599e46.js";const Q=["title"],X={class:"status-text"},Y=R({__name:"SystemStatusBadge",setup(n){const o=I(),{status:i,error:m,connect:f,disconnect:y,cleanup:_}=K(),x=p(null),b=E(()=>{switch(i.value){case"connected":return"Connected";case"connecting":return"Connecting...";case"reconnecting":return"Reconnecting...";case"error":return"Connection Error";default:return"Disconnected"}}),C=E(()=>({"status-connected":i.value==="connected","status-connecting":i.value==="connecting","status-reconnecting":i.value==="reconnecting","status-error":i.value==="error","status-disconnected":i.value==="disconnected"})),r=E(()=>m.value?`Error: ${m.value.message}`:x.value?`Error: ${x.value.message}`:b.value);A(m,a=>{a&&(x.value=a)});const $=()=>{try{if(!o)return;o.isAuthenticated&&o.token&&f(o.token).catch(a=>{const c=a instanceof Error?a:new Error(String(a));x.value=c,c.message.includes("Network error")||c.message.includes("Tiempo de conexión agotado")})}catch(a){const c=a instanceof Error?a:new Error(String(a));x.value=c}};return A(()=>o.token,(a,c)=>{try{if(!a&&c){y();return}a&&o.isAuthenticated&&f(a).catch(v=>{const w=v instanceof Error?v:new Error(String(v));x.value=w})}catch(v){const w=v instanceof Error?v:new Error(String(v));x.value=w}},{immediate:!0}),B(()=>{$()}),q(()=>{_()}),(a,c)=>(l(),d("div",{class:h(["system-status-badge",C.value]),title:r.value},[c[0]||(c[0]=e("span",{class:"status-dot"},null,-1)),e("span",X,g(b.value),1)],10,Q))}});const ee=S(Y,[["__scopeId","data-v-09c05868"]]),te="/images/zues-3d-main.png";const se={class:"zeus-3d-container relative flex flex-col items-center justify-center h-full w-full"},ne={__name:"Zeus3D",setup(n){const o=F(),i=I(),m=p(!0),f=()=>{o.push("/perfil")},y=()=>{o.push("/dashboard")},_=()=>{alert("Estado del sistema: conectado")},x=()=>{m.value=!m.value},b=async()=>{await i.logout(),o.push("/login")};return(C,r)=>(l(),d("div",se,[r[5]||(r[5]=e("img",{src:te,alt:"ZEUS IA Zeus",class:"zeus-3d-image rounded-xl shadow-lg object-cover",draggable:"false"},null,-1)),e("div",{class:"zeus-3d-buttons absolute inset-0 flex flex-col items-end justify-between p-6 pointer-events-none"},[e("div",{class:"flex flex-col space-y-4 mt-2 pointer-events-auto"},[e("button",{onClick:f,class:"zeus-btn",title:"Perfil de usuario"},r[0]||(r[0]=[e("i",{class:"fas fa-user-circle"},null,-1)])),e("button",{onClick:y,class:"zeus-btn",title:"Panel de control"},r[1]||(r[1]=[e("i",{class:"fas fa-tachometer-alt"},null,-1)])),e("button",{onClick:_,class:"zeus-btn",title:"Estado del sistema"},r[2]||(r[2]=[e("i",{class:"fas fa-signal"},null,-1)])),e("button",{onClick:x,class:"zeus-btn",title:"Vista 3D"},r[3]||(r[3]=[e("i",{class:"fas fa-cube"},null,-1)]))]),e("div",{class:"flex flex-col pointer-events-auto"},[e("button",{onClick:b,class:"zeus-btn",title:"Cerrar sesión"},r[4]||(r[4]=[e("i",{class:"fas fa-sign-out-alt"},null,-1)]))])])]))}},oe=S(ne,[["__scopeId","data-v-d3f707c0"]]);const re={class:"bg-white overflow-hidden shadow rounded-lg"},ae={class:"p-5"},le={class:"flex items-center"},ie={key:1,class:"h-6 w-6"},de={class:"ml-5 w-0 flex-1"},ce={class:"text-sm font-medium text-gray-500 truncate"},ue={class:"text-lg font-medium text-gray-900"},ge={key:0,class:"mt-4 flex items-center"},me={key:1,class:"mt-4"},fe={__name:"DashboardMetric",props:{title:{type:String,required:!0},value:{type:[String,Number],required:!0},icon:{type:String,required:!0},trend:{type:String,validator:n=>["up","down",null,void 0].includes(n),default:null},trendValue:{type:String,default:""},loading:{type:Boolean,default:!1}},setup(n){return(o,i)=>(l(),d("div",re,[e("div",ae,[e("div",le,[e("div",{class:h(["flex-shrink-0 rounded-md p-3",{"bg-indigo-100":!n.loading,"bg-gray-200":n.loading,"animate-pulse":n.loading}])},[n.loading?(l(),d("div",ie)):(l(),d("i",{key:0,class:h(["fas",`fa-${n.icon}`,"text-indigo-600 text-lg"])},null,2))],2),e("div",de,[e("dl",null,[e("dt",ce,g(n.loading?"Cargando...":n.title),1),e("dd",null,[e("div",ue,g(n.loading?"...":n.value),1)])])])]),!n.loading&&n.trend?(l(),d("div",ge,[e("span",{class:h(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",n.trend==="up"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},[e("i",{class:h(["mr-1",n.trend==="up"?"fa-arrow-up":"fa-arrow-down"])},null,2),k(" "+g(n.trendValue),1)],2),i[0]||(i[0]=e("span",{class:"ml-2 text-sm text-gray-500"}," vs. período anterior ",-1))])):n.loading?(l(),d("div",me,i[1]||(i[1]=[e("div",{class:"h-4 bg-gray-200 rounded w-3/4"},null,-1)]))):D("",!0)])]))}},xe=S(fe,[["__scopeId","data-v-b4acc032"]]);const pe={class:"dashboard"},ve={key:0,class:"fixed inset-0 bg-white bg-opacity-75 flex items-center justify-center z-50"},he={key:1,class:"fixed inset-0 bg-white flex items-center justify-center z-50"},ye={class:"text-center p-6 max-w-md mx-auto"},_e={class:"mt-2 text-sm text-gray-500"},be={class:"mt-5"},we={class:"bg-white shadow"},ke={class:"max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8 flex justify-between items-center"},Ce={class:"flex items-center space-x-4"},Ee={class:"relative"},De={class:"hidden md:inline text-sm font-medium text-gray-700"},Se={key:0,class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50",role:"menu",tabindex:"-1"},$e={class:"py-1",role:"none"},ze={class:"max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8"},Ve={class:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-8"},Pe={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8"},Ne={class:"lg:col-span-2 bg-white rounded-lg shadow p-6"},Ae={class:"flex justify-between items-center mb-4"},Ie={class:"flex space-x-2"},Le=["onClick"],je={class:"h-64"},Me={class:"bg-white rounded-lg shadow overflow-hidden"},Be={class:"p-6"},qe={class:"h-64"},Fe={class:"bg-white shadow overflow-hidden sm:rounded-lg"},Re={class:"overflow-x-auto"},Ue={class:"min-w-full divide-y divide-gray-200"},Ze={class:"bg-white divide-y divide-gray-200"},He={class:"px-6 py-4 whitespace-nowrap"},Oe={class:"flex items-center"},Te={class:"flex-shrink-0 h-10 w-10"},Ge={class:"ml-4"},Je={class:"text-sm font-medium text-gray-900"},We={class:"text-sm text-gray-500"},Ke={class:"px-6 py-4 whitespace-nowrap"},Qe={class:"text-sm text-gray-900"},Xe={class:"px-6 py-4 whitespace-nowrap"},Ye={class:"text-sm text-gray-500"},et={class:"px-6 py-4 whitespace-nowrap"},tt={key:0},st={__name:"Dashboard",setup(n){U.register(...Z);const o=I(),i=F(),m=p("día"),f=p(!1),y=p(!0),_=p(null),x=p(null);p(null);const b=p(null),C=p([{title:"Ventas Hoy",value:"1,245",icon:"shopping-cart",trend:"up",trendValue:"12%",loading:!1},{title:"Ingresos",value:"$12,548",icon:"dollar-sign",trend:"down",trendValue:"3%"},{title:"Clientes Nuevos",value:"24",icon:"users",trend:"up",trendValue:"8%"},{title:"Órdenes",value:"156",icon:"box",trend:"up",trendValue:"5%"}]),r=p([{id:1,title:"Nueva orden creada",description:"Orden #1001 por $125.75",type:"order",user:"Juan Pérez",timestamp:new Date,status:"completed"},{id:2,title:"Error de pago",description:"Error al procesar el pago #1002",type:"error",user:"María García",timestamp:M(new Date,1),status:"error"},{id:3,title:"Nuevo cliente registrado",description:"Carlos López se ha registrado",type:"user",user:"Sistema",timestamp:M(new Date,2),status:"completed"}]),$={order:"fas fa-shopping-cart",error:"fas fa-exclamation-circle",user:"fas fa-user-plus",system:"fas fa-cog"},a=E(()=>o.userFullName||"Usuario"),c=u=>{if(!u)return"";try{const t=typeof u=="string"?new Date(u):u;return J(t,"dd/MM/yyyy HH:mm",{locale:W})}catch{return"Fecha inválida"}},v=async()=>{try{await o.logout(),i.push("/login")}catch{}},w=u=>{if(!f.value)return;const t=u.target,z=t.closest(".origin-top-right"),s=t.closest("button");!z&&!s&&(f.value=!1)},L=()=>{};return A(m,u=>{}),B(()=>{(()=>{y.value=!1,Promise.resolve().then(async()=>{try{if(!o.isAuthenticated){i.push("/auth/login");return}o.user&&(x.value=o.user),"requestIdleCallback"in window?requestIdleCallback(()=>{try{L()}catch{}},{timeout:2e3}):Promise.resolve().then(()=>{try{L()}catch{}})}catch{}})})(),document.addEventListener("click",w,{passive:!0})}),q(()=>{document.removeEventListener("click",w)}),(u,t)=>{const z=T("router-link");return l(),d("div",pe,[y.value?(l(),d("div",ve,t[4]||(t[4]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),e("p",{class:"mt-4 text-gray-700"},"Cargando datos del dashboard...")],-1)]))):_.value?(l(),d("div",he,[e("div",ye,[t[7]||(t[7]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[e("i",{class:"fas fa-exclamation-triangle text-red-600 text-xl"})],-1)),t[8]||(t[8]=e("h3",{class:"mt-3 text-lg font-medium text-gray-900"},"Error al cargar el dashboard",-1)),e("p",_e,g(_.value),1),e("div",be,[e("button",{onClick:t[0]||(t[0]=(...s)=>u.retryLoading&&u.retryLoading(...s)),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},t[5]||(t[5]=[e("i",{class:"fas fa-sync-alt mr-2"},null,-1),k(" Reintentar ")])),e("button",{onClick:t[1]||(t[1]=s=>H(o).logout()),class:"ml-3 inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},t[6]||(t[6]=[e("i",{class:"fas fa-sign-out-alt mr-2"},null,-1),k(" Cerrar sesión ")]))])])])):D("",!0),e("header",we,[e("div",ke,[t[12]||(t[12]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Panel de Control",-1)),e("div",Ce,[V(ee),e("div",Ee,[e("button",{onClick:t[2]||(t[2]=s=>f.value=!f.value),class:"flex items-center space-x-2 focus:outline-none"},[t[9]||(t[9]=e("span",{class:"inline-block h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center"},[e("i",{class:"fas fa-user text-indigo-600"})],-1)),e("span",De,g(a.value),1)]),f.value?(l(),d("div",Se,[e("div",$e,[V(z,{to:"/perfil",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:t[3]||(t[3]=s=>f.value=!1)},{default:O(()=>t[10]||(t[10]=[e("i",{class:"fas fa-user-circle mr-2"},null,-1),k(" Perfil ")])),_:1,__:[10]}),e("button",{onClick:v,class:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem"},t[11]||(t[11]=[e("i",{class:"fas fa-sign-out-alt mr-2"},null,-1),k(" Cerrar sesión ")]))])])):D("",!0)])])])]),e("main",ze,[e("div",Ve,[(l(!0),d(P,null,N(C.value,s=>(l(),G(xe,{key:s.title,title:s.title,value:s.value,icon:s.icon,trend:s.trend,"trend-value":s.trendValue,loading:y.value},null,8,["title","value","icon","trend","trend-value","loading"]))),128))]),e("div",Pe,[e("div",Ne,[e("div",Ae,[t[13]||(t[13]=e("h2",{class:"text-lg font-medium text-gray-900"},"Ventas Recientes",-1)),e("div",Ie,[(l(),d(P,null,N(["Día","Semana","Mes"],s=>e("button",{key:s,onClick:j=>m.value=s.toLowerCase(),class:h(["px-3 py-1 text-sm rounded-md",{"bg-indigo-100 text-indigo-700":m.value===s.toLowerCase(),"text-gray-500 hover:bg-gray-100":m.value!==s.toLowerCase()}])},g(s),11,Le)),64))])]),e("div",je,[e("canvas",{ref_key:"salesChart",ref:b},null,512)])]),e("div",Me,[e("div",Be,[t[14]||(t[14]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Vista 3D",-1)),e("div",qe,[V(oe,{class:"h-full w-full"})])])])]),e("div",Fe,[t[17]||(t[17]=e("div",{class:"px-4 py-5 sm:px-6 border-b border-gray-200"},[e("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Actividad Reciente"),e("p",{class:"mt-1 max-w-2xl text-sm text-gray-500"}," Últimas actividades en el sistema ")],-1)),e("div",Re,[e("table",Ue,[t[16]||(t[16]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actividad "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Usuario "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Fecha "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Estado ")])],-1)),e("tbody",Ze,[(l(!0),d(P,null,N(r.value,(s,j)=>(l(),d("tr",{key:j},[e("td",He,[e("div",Oe,[e("div",Te,[e("i",{class:h([$[s.type],"text-indigo-600 text-lg"])},null,2)]),e("div",Ge,[e("div",Je,g(s.title),1),e("div",We,g(s.description),1)])])]),e("td",Ke,[e("div",Qe,g(s.user),1)]),e("td",Xe,[e("div",Ye,g(c(s.timestamp)),1)]),e("td",et,[e("span",{class:h(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",s.status==="completed"?"bg-green-100 text-green-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"])},g(s.status==="completed"?"Completado":s.status==="pending"?"Pendiente":"Error"),3)])]))),128)),r.value.length===0?(l(),d("tr",tt,t[15]||(t[15]=[e("td",{colspan:"4",class:"px-6 py-4 text-center text-sm text-gray-500"}," No hay actividades recientes ",-1)]))):D("",!0)])])])])])])}}},at=S(st,[["__scopeId","data-v-34f24bdf"]]);export{at as default};
