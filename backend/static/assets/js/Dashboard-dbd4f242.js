import{p as H,r as p,c as D,x as L,q as R,y as Z,o as i,b as c,e,t as g,n as h,z as U,k as C,g as S,C as V,A as T,B as A,D as O,f as N,w as G,F as P,E as B,h as J,G as W,H as M,I as F}from"./vendor-3902db62.js";import{u as j,_ as $}from"./index-78cfa7fa.js";import{u as K}from"./WebSocketService-162ec54e.js";const Q=["title"],X={class:"status-text"},Y=H({__name:"SystemStatusBadge",setup(n){const o=j(),{status:d,error:f,connect:m,disconnect:_,cleanup:b}=K(),x=p(null),v=D(()=>{switch(d.value){case"connected":return"Connected";case"connecting":return"Connecting...";case"reconnecting":return"Reconnecting...";case"error":return"Connection Error";default:return"Disconnected"}}),E=D(()=>({"status-connected":d.value==="connected","status-connecting":d.value==="connecting","status-reconnecting":d.value==="reconnecting","status-error":d.value==="error","status-disconnected":d.value==="disconnected"})),a=D(()=>f.value?`Error: ${f.value.message}`:x.value?`Error: ${x.value.message}`:v.value);L(f,r=>{r&&(x.value=r)});const z=()=>{try{if(!o)return;o.isAuthenticated&&o.token&&m(o.token).catch(r=>{const u=r instanceof Error?r:new Error(String(r));x.value=u,u.message.includes("Network error")||u.message.includes("Tiempo de conexión agotado")})}catch(r){const u=r instanceof Error?r:new Error(String(r));x.value=u}};return L(()=>o.token,(r,u)=>{try{if(!r&&u){_();return}r&&o.isAuthenticated&&m(r).catch(y=>{const w=y instanceof Error?y:new Error(String(y));x.value=w})}catch(y){const w=y instanceof Error?y:new Error(String(y));x.value=w}},{immediate:!0}),R(()=>{z()}),Z(()=>{b()}),(r,u)=>(i(),c("div",{class:h(["system-status-badge",E.value]),title:a.value},[u[0]||(u[0]=e("span",{class:"status-dot"},null,-1)),e("span",X,g(v.value),1)],10,Q))}});const ee=$(Y,[["__scopeId","data-v-09c05868"]]),te="/images/zues-3d-main.png";const se={class:"zeus-3d-container relative flex flex-col items-center justify-center h-full w-full"},ne={__name:"Zeus3D",setup(n){const o=U(),d=j(),f=p(!0),m=()=>{o.push("/perfil")},_=()=>{o.push("/dashboard")},b=()=>{alert("Estado del sistema: conectado")},x=()=>{f.value=!f.value},v=async()=>{await d.logout(),o.push("/login")};return(E,a)=>(i(),c("div",se,[a[5]||(a[5]=e("img",{src:te,alt:"ZEUS IA Zeus",class:"zeus-3d-image rounded-xl shadow-lg object-cover",draggable:"false"},null,-1)),e("div",{class:"zeus-3d-buttons absolute inset-0 flex flex-col items-end justify-between p-6 pointer-events-none"},[e("div",{class:"flex flex-col space-y-4 mt-2 pointer-events-auto"},[e("button",{onClick:m,class:"zeus-btn",title:"Perfil de usuario"},a[0]||(a[0]=[e("i",{class:"fas fa-user-circle"},null,-1)])),e("button",{onClick:_,class:"zeus-btn",title:"Panel de control"},a[1]||(a[1]=[e("i",{class:"fas fa-tachometer-alt"},null,-1)])),e("button",{onClick:b,class:"zeus-btn",title:"Estado del sistema"},a[2]||(a[2]=[e("i",{class:"fas fa-signal"},null,-1)])),e("button",{onClick:x,class:"zeus-btn",title:"Vista 3D"},a[3]||(a[3]=[e("i",{class:"fas fa-cube"},null,-1)]))]),e("div",{class:"flex flex-col pointer-events-auto"},[e("button",{onClick:v,class:"zeus-btn",title:"Cerrar sesión"},a[4]||(a[4]=[e("i",{class:"fas fa-sign-out-alt"},null,-1)]))])])]))}},oe=$(ne,[["__scopeId","data-v-d3f707c0"]]);const ae={class:"bg-white overflow-hidden shadow rounded-lg"},re={class:"p-5"},le={class:"flex items-center"},ie={key:1,class:"h-6 w-6"},de={class:"ml-5 w-0 flex-1"},ce={class:"text-sm font-medium text-gray-500 truncate"},ue={class:"text-lg font-medium text-gray-900"},ge={key:0,class:"mt-4 flex items-center"},fe={key:1,class:"mt-4"},me={__name:"DashboardMetric",props:{title:{type:String,required:!0},value:{type:[String,Number],required:!0},icon:{type:String,required:!0},trend:{type:String,validator:n=>["up","down",null,void 0].includes(n),default:null},trendValue:{type:String,default:""},loading:{type:Boolean,default:!1}},setup(n){return(o,d)=>(i(),c("div",ae,[e("div",re,[e("div",le,[e("div",{class:h(["flex-shrink-0 rounded-md p-3",{"bg-indigo-100":!n.loading,"bg-gray-200":n.loading,"animate-pulse":n.loading}])},[n.loading?(i(),c("div",ie)):(i(),c("i",{key:0,class:h(["fas",`fa-${n.icon}`,"text-indigo-600 text-lg"])},null,2))],2),e("div",de,[e("dl",null,[e("dt",ce,g(n.loading?"Cargando...":n.title),1),e("dd",null,[e("div",ue,g(n.loading?"...":n.value),1)])])])]),!n.loading&&n.trend?(i(),c("div",ge,[e("span",{class:h(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",n.trend==="up"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},[e("i",{class:h(["mr-1",n.trend==="up"?"fa-arrow-up":"fa-arrow-down"])},null,2),C(" "+g(n.trendValue),1)],2),d[0]||(d[0]=e("span",{class:"ml-2 text-sm text-gray-500"}," vs. período anterior ",-1))])):n.loading?(i(),c("div",fe,d[1]||(d[1]=[e("div",{class:"h-4 bg-gray-200 rounded w-3/4"},null,-1)]))):S("",!0)])]))}},xe=$(me,[["__scopeId","data-v-b4acc032"]]);const pe={class:"dashboard"},ve={key:0,class:"fixed inset-0 bg-white bg-opacity-75 flex items-center justify-center z-50"},ye={key:1,class:"fixed inset-0 bg-white flex items-center justify-center z-50"},he={class:"text-center p-6 max-w-md mx-auto"},_e={class:"mt-2 text-sm text-gray-500"},be={class:"mt-5"},we={class:"bg-white shadow"},ke={class:"max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8 flex justify-between items-center"},Ce={class:"flex items-center space-x-4"},Ee={class:"relative"},De={class:"hidden md:inline text-sm font-medium text-gray-700"},Se={key:0,class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50",role:"menu",tabindex:"-1"},$e={class:"py-1",role:"none"},ze={class:"max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8"},Ve={class:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-8"},Ae={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8"},Ne={class:"lg:col-span-2 bg-white rounded-lg shadow p-6"},Pe={class:"flex justify-between items-center mb-4"},Be={class:"flex space-x-2"},Le=["onClick"],je={class:"h-64"},Ie={class:"bg-white rounded-lg shadow overflow-hidden"},Me={class:"p-6"},Fe={class:"h-64"},Re={class:"bg-white shadow overflow-hidden sm:rounded-lg"},Ze={class:"overflow-x-auto"},Ue={class:"min-w-full divide-y divide-gray-200"},qe={class:"bg-white divide-y divide-gray-200"},He={class:"px-6 py-4 whitespace-nowrap"},Te={class:"flex items-center"},Oe={class:"flex-shrink-0 h-10 w-10"},Ge={class:"ml-4"},Je={class:"text-sm font-medium text-gray-900"},We={class:"text-sm text-gray-500"},Ke={class:"px-6 py-4 whitespace-nowrap"},Qe={class:"text-sm text-gray-900"},Xe={class:"px-6 py-4 whitespace-nowrap"},Ye={class:"text-sm text-gray-500"},et={class:"px-6 py-4 whitespace-nowrap"},tt={key:0},st={__name:"Dashboard",setup(n){V.register(...T);const o=j(),d=U(),f=p("día"),m=p(!1),_=p(!0),b=p(null),x=p(null);p(null);const v=p(null),E=p([{title:"Ventas Hoy",value:"1,245",icon:"shopping-cart",trend:"up",trendValue:"12%",loading:!1},{title:"Ingresos",value:"$12,548",icon:"dollar-sign",trend:"down",trendValue:"3%"},{title:"Clientes Nuevos",value:"24",icon:"users",trend:"up",trendValue:"8%"},{title:"Órdenes",value:"156",icon:"box",trend:"up",trendValue:"5%"}]),a=p([{id:1,title:"Nueva orden creada",description:"Orden #1001 por $125.75",type:"order",user:"Juan Pérez",timestamp:new Date,status:"completed"},{id:2,title:"Error de pago",description:"Error al procesar el pago #1002",type:"error",user:"María García",timestamp:A(new Date,1),status:"error"},{id:3,title:"Nuevo cliente registrado",description:"Carlos López se ha registrado",type:"user",user:"Sistema",timestamp:A(new Date,2),status:"completed"}]),z={order:"fas fa-shopping-cart",error:"fas fa-exclamation-circle",user:"fas fa-user-plus",system:"fas fa-cog"},r=D(()=>o.userFullName||"Usuario"),u=l=>{if(!l)return"";try{const t=typeof l=="string"?new Date(l):l;return M(t,"dd/MM/yyyy HH:mm",{locale:F})}catch{return"Fecha inválida"}},y=async()=>{try{await o.logout(),d.push("/login")}catch{}},w=l=>{if(!m.value)return;const t=l.target,k=t.closest(".origin-top-right"),s=t.closest("button");!k&&!s&&(m.value=!1)},q=()=>{if(v.value){const l=V.getChart(v.value);l&&l.destroy()}if(v.value){const l=v.value.getContext("2d");new V(l,{type:"line",data:{labels:Array.from({length:7},(t,k)=>{const s=A(new Date,6-k);return M(s,"EEE",{locale:F})}),datasets:[{label:"Ventas",data:[12,19,3,5,2,3,15],borderColor:"rgb(79, 70, 229)",backgroundColor:"rgba(79, 70, 229, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,grid:{display:!0,drawBorder:!1},ticks:{stepSize:5}},x:{grid:{display:!1,drawBorder:!1}}}}})}};return L(f,l=>{}),R(()=>{(()=>{_.value=!1,Promise.resolve().then(async()=>{try{if(!o.isAuthenticated){d.push("/auth/login");return}o.user&&(x.value=o.user),setTimeout(()=>{try{q()}catch{}},1e3)}catch{}})})(),document.addEventListener("click",w,{passive:!0})}),Z(()=>{document.removeEventListener("click",w)}),(l,t)=>{const k=J("router-link");return i(),c("div",pe,[_.value?(i(),c("div",ve,t[4]||(t[4]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),e("p",{class:"mt-4 text-gray-700"},"Cargando datos del dashboard...")],-1)]))):b.value?(i(),c("div",ye,[e("div",he,[t[7]||(t[7]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[e("i",{class:"fas fa-exclamation-triangle text-red-600 text-xl"})],-1)),t[8]||(t[8]=e("h3",{class:"mt-3 text-lg font-medium text-gray-900"},"Error al cargar el dashboard",-1)),e("p",_e,g(b.value),1),e("div",be,[e("button",{onClick:t[0]||(t[0]=(...s)=>l.retryLoading&&l.retryLoading(...s)),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},t[5]||(t[5]=[e("i",{class:"fas fa-sync-alt mr-2"},null,-1),C(" Reintentar ")])),e("button",{onClick:t[1]||(t[1]=s=>O(o).logout()),class:"ml-3 inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},t[6]||(t[6]=[e("i",{class:"fas fa-sign-out-alt mr-2"},null,-1),C(" Cerrar sesión ")]))])])])):S("",!0),e("header",we,[e("div",ke,[t[12]||(t[12]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Panel de Control",-1)),e("div",Ce,[N(ee),e("div",Ee,[e("button",{onClick:t[2]||(t[2]=s=>m.value=!m.value),class:"flex items-center space-x-2 focus:outline-none"},[t[9]||(t[9]=e("span",{class:"inline-block h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center"},[e("i",{class:"fas fa-user text-indigo-600"})],-1)),e("span",De,g(r.value),1)]),m.value?(i(),c("div",Se,[e("div",$e,[N(k,{to:"/perfil",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:t[3]||(t[3]=s=>m.value=!1)},{default:G(()=>t[10]||(t[10]=[e("i",{class:"fas fa-user-circle mr-2"},null,-1),C(" Perfil ")])),_:1,__:[10]}),e("button",{onClick:y,class:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem"},t[11]||(t[11]=[e("i",{class:"fas fa-sign-out-alt mr-2"},null,-1),C(" Cerrar sesión ")]))])])):S("",!0)])])])]),e("main",ze,[e("div",Ve,[(i(!0),c(P,null,B(E.value,s=>(i(),W(xe,{key:s.title,title:s.title,value:s.value,icon:s.icon,trend:s.trend,"trend-value":s.trendValue,loading:_.value},null,8,["title","value","icon","trend","trend-value","loading"]))),128))]),e("div",Ae,[e("div",Ne,[e("div",Pe,[t[13]||(t[13]=e("h2",{class:"text-lg font-medium text-gray-900"},"Ventas Recientes",-1)),e("div",Be,[(i(),c(P,null,B(["Día","Semana","Mes"],s=>e("button",{key:s,onClick:I=>f.value=s.toLowerCase(),class:h(["px-3 py-1 text-sm rounded-md",{"bg-indigo-100 text-indigo-700":f.value===s.toLowerCase(),"text-gray-500 hover:bg-gray-100":f.value!==s.toLowerCase()}])},g(s),11,Le)),64))])]),e("div",je,[e("canvas",{ref_key:"salesChart",ref:v},null,512)])]),e("div",Ie,[e("div",Me,[t[14]||(t[14]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Vista 3D",-1)),e("div",Fe,[N(oe,{class:"h-full w-full"})])])])]),e("div",Re,[t[17]||(t[17]=e("div",{class:"px-4 py-5 sm:px-6 border-b border-gray-200"},[e("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Actividad Reciente"),e("p",{class:"mt-1 max-w-2xl text-sm text-gray-500"}," Últimas actividades en el sistema ")],-1)),e("div",Ze,[e("table",Ue,[t[16]||(t[16]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actividad "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Usuario "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Fecha "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Estado ")])],-1)),e("tbody",qe,[(i(!0),c(P,null,B(a.value,(s,I)=>(i(),c("tr",{key:I},[e("td",He,[e("div",Te,[e("div",Oe,[e("i",{class:h([z[s.type],"text-indigo-600 text-lg"])},null,2)]),e("div",Ge,[e("div",Je,g(s.title),1),e("div",We,g(s.description),1)])])]),e("td",Ke,[e("div",Qe,g(s.user),1)]),e("td",Xe,[e("div",Ye,g(u(s.timestamp)),1)]),e("td",et,[e("span",{class:h(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",s.status==="completed"?"bg-green-100 text-green-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"])},g(s.status==="completed"?"Completado":s.status==="pending"?"Pendiente":"Error"),3)])]))),128)),a.value.length===0?(i(),c("tr",tt,t[15]||(t[15]=[e("td",{colspan:"4",class:"px-6 py-4 text-center text-sm text-gray-500"}," No hay actividades recientes ",-1)]))):S("",!0)])])])])])])}}},rt=$(st,[["__scopeId","data-v-8fe7d208"]]);export{rt as default};
