import{r as d,q as h,b as i,e,t as w,g as x,K as u,L as m,N as y,O as L,z as _,u as k,o as a}from"./vendor-bdffe547.js";import{u as S}from"./index-0bb8e702.js";const M={key:0,class:"bg-red-50 border-l-4 border-red-400 p-4 mb-6"},j={class:"flex"},V={class:"ml-3"},C={class:"text-sm text-red-700 whitespace-pre-line"},z={class:"rounded-md shadow-sm -space-y-px"},E=["disabled"],O=["disabled"],N={class:"flex items-center justify-between"},T={class:"flex items-center"},A=["disabled"],B=["disabled"],R={key:0},q={key:1},J={__name:"Login",setup(I){const v=_(),p=k(),c=S(),r=d({email:"",password:"",rememberMe:!1}),l=d(""),n=d(!1),g=p.query.redirect||"/dashboard";h(()=>{c.isAuthenticated&&v.push(g)});const f=()=>{const t={};return r.value.email?/\S+@\S+\.\S+/.test(r.value.email)||(t.email="El correo electrónico no es válido"):t.email="El correo electrónico es obligatorio",r.value.password?r.value.password.length<6&&(t.password="La contraseña debe tener al menos 6 caracteres"):t.password="La contraseña es obligatoria",Object.keys(t).length===0?!0:t},b=async()=>{const t=f();if(t!==!0){l.value=Object.values(t).join(`
`);return}n.value=!0,l.value="";try{const o=await c.login(r.value.email,r.value.password);if(o.success){if(!localStorage.getItem("auth_token")){l.value="No se pudo guardar el token de autenticación";return}window.location.href=g}else{let s=o.error||o.message||"Error al iniciar sesión. Por favor, verifica tus credenciales.";typeof s!="string"&&(s=JSON.stringify(s)),l.value=s}}catch(o){let s=o.message||"Ocurrió un error al intentar iniciar sesión. Por favor, inténtalo de nuevo.";typeof s!="string"&&(s=JSON.stringify(s)),l.value=s}finally{n.value=!1}};return(t,o)=>(a(),i("div",null,[l.value?(a(),i("div",M,[e("div",j,[o[3]||(o[3]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z","clip-rule":"evenodd"})])],-1)),e("div",V,[e("p",C,w(l.value),1)])])])):x("",!0),e("form",{class:"space-y-6",onSubmit:L(b,["prevent"])},[e("div",z,[e("div",null,[o[4]||(o[4]=e("label",{for:"email-address",class:"sr-only"},"Correo electrónico",-1)),u(e("input",{id:"email-address","onUpdate:modelValue":o[0]||(o[0]=s=>r.value.email=s),name:"email",type:"email",autocomplete:"email",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Correo electrónico",disabled:n.value},null,8,E),[[m,r.value.email]])]),e("div",null,[o[5]||(o[5]=e("label",{for:"password",class:"sr-only"},"Contraseña",-1)),u(e("input",{id:"password","onUpdate:modelValue":o[1]||(o[1]=s=>r.value.password=s),name:"password",type:"password",autocomplete:"current-password",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",disabled:n.value},null,8,O),[[m,r.value.password]])])]),e("div",N,[e("div",T,[u(e("input",{id:"remember-me","onUpdate:modelValue":o[2]||(o[2]=s=>r.value.rememberMe=s),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",disabled:n.value},null,8,A),[[y,r.value.rememberMe]]),o[6]||(o[6]=e("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Recordar sesión ",-1))]),o[7]||(o[7]=e("div",{class:"text-sm"},[e("a",{href:"#",class:"font-medium text-indigo-600 hover:text-indigo-500"}," ¿Olvidaste tu contraseña? ")],-1))]),e("div",null,[e("button",{type:"submit",class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",disabled:n.value},[o[8]||(o[8]=e("span",{class:"absolute left-0 inset-y-0 flex items-center pl-3"},[e("svg",{class:"h-5 w-5 text-indigo-500 group-hover:text-indigo-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z","clip-rule":"evenodd"})])],-1)),n.value?(a(),i("span",q,"Iniciando sesión...")):(a(),i("span",R,"Iniciar sesión"))],8,B)])],32)]))}};export{J as default};
