import{r as d,P as g,q as z,b as r,e,t as c,f as x,w as _,O as M,g as u,K as b,L as y,n as h,Q as R,z as P,u as B,h as N,o as n,k}from"./vendor-3902db62.js";import{_ as T}from"./index-afcb3022.js";const S={class:"space-y-6"},j={key:0,class:"bg-green-50 border-l-4 border-green-400 p-4 mb-6"},q={class:"flex"},A={class:"ml-3"},D={class:"text-sm text-green-700"},I={class:"mt-4"},O={key:0,class:"bg-red-50 border-l-4 border-red-400 p-4 mb-6"},U={class:"flex"},E={class:"ml-3"},F={class:"text-sm text-red-700"},H={class:"mt-1"},K={key:0,class:"mt-2 text-sm text-red-600"},Q={class:"mt-1"},Z={key:0,class:"mt-2 text-sm text-red-600"},G=["disabled"],J={key:0},W={key:1,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},X={key:2,class:"mt-6"},Y={class:"mt-6"},$={__name:"ResetPassword",setup(ee){P();const L=B(),l=d(!1),i=d(""),p=d(!1),f=d(""),v=d(""),a=g({password:"",password_confirmation:""}),o=g({password:"",password_confirmation:""});z(()=>{v.value=L.params.token,v.value||(i.value="Token de restablecimiento no válido o faltante")});const V=()=>{let t=!0;return o.password="",o.password_confirmation="",a.password?a.password.length<8?(o.password="La contraseña debe tener al menos 8 caracteres",t=!1):/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(a.password)||(o.password="La contraseña debe contener al menos una letra mayúscula, una minúscula y un número",t=!1):(o.password="La contraseña es obligatoria",t=!1),a.password!==a.password_confirmation&&(o.password_confirmation="Las contraseñas no coinciden",t=!1),t},C=async()=>{if(V()){l.value=!0,i.value="";try{await new Promise(t=>setTimeout(t,1500)),p.value=!0,f.value="¡Tu contraseña ha sido restablecida con éxito! Ahora puedes iniciar sesión con tu nueva contraseña."}catch(t){i.value=t.response?.data?.message||"Ocurrió un error al restablecer tu contraseña. Por favor, inténtalo de nuevo."}finally{l.value=!1}}};return(t,s)=>{const w=N("router-link");return n(),r("div",S,[s[10]||(s[10]=e("div",{class:"text-center"},[e("h2",{class:"text-2xl font-bold text-gray-900"},"Restablecer contraseña"),e("p",{class:"mt-2 text-sm text-gray-600"}," Ingresa tu nueva contraseña para continuar. ")],-1)),p.value?(n(),r("div",j,[e("div",q,[s[2]||(s[2]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),e("div",A,[e("p",D,c(f.value),1)])]),e("div",I,[x(w,{to:"/auth/login",class:"font-medium text-indigo-600 hover:text-indigo-500"},{default:_(()=>s[3]||(s[3]=[k(" Volver al inicio de sesión → ")])),_:1,__:[3]})])])):(n(),r("form",{key:1,class:"space-y-6",onSubmit:M(C,["prevent"])},[i.value?(n(),r("div",O,[e("div",U,[s[4]||(s[4]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z","clip-rule":"evenodd"})])],-1)),e("div",E,[e("p",F,c(i.value),1)])])])):u("",!0),e("div",null,[s[5]||(s[5]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Nueva contraseña ",-1)),e("div",H,[b(e("input",{id:"password","onUpdate:modelValue":s[0]||(s[0]=m=>a.password=m),type:"password",autocomplete:"new-password",required:"",class:h(["appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",{"border-red-300":o.password}])},null,2),[[y,a.password]]),o.password?(n(),r("p",K,c(o.password),1)):u("",!0)])]),e("div",null,[s[6]||(s[6]=e("label",{for:"password_confirmation",class:"block text-sm font-medium text-gray-700"}," Confirmar nueva contraseña ",-1)),e("div",Q,[b(e("input",{id:"password_confirmation","onUpdate:modelValue":s[1]||(s[1]=m=>a.password_confirmation=m),type:"password",autocomplete:"new-password",required:"",class:h(["appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",{"border-red-300":o.password_confirmation}])},null,2),[[y,a.password_confirmation]]),o.password_confirmation?(n(),r("p",Z,c(o.password_confirmation),1)):u("",!0)])]),e("div",null,[e("button",{type:"submit",class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",disabled:l.value},[l.value?(n(),r("svg",W,s[7]||(s[7]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(n(),r("span",J,"Restablecer contraseña"))],8,G)])],32)),p.value?u("",!0):(n(),r("div",X,[s[9]||(s[9]=R('<div class="relative" data-v-e5443ee3><div class="absolute inset-0 flex items-center" data-v-e5443ee3><div class="w-full border-t border-gray-300" data-v-e5443ee3></div></div><div class="relative flex justify-center text-sm" data-v-e5443ee3><span class="px-2 bg-gray-100 text-gray-500" data-v-e5443ee3> ¿Recordaste tu contraseña? </span></div></div>',1)),e("div",Y,[x(w,{to:"/auth/login",class:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:_(()=>s[8]||(s[8]=[k(" Volver al inicio de sesión ")])),_:1,__:[8]})])]))])}}},te=T($,[["__scopeId","data-v-e5443ee3"]]);export{te as default};
