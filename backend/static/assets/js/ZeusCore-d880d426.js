import{r as h,q as K,K as ae,y as Q,o as f,b as v,e,F as Z,D as P,n as T,t as r,L as ie,M as re,N as ce,g as Y,c as N,f as le,G as ue}from"./vendor-517526e0.js";import{_ as ee,u as te}from"./index-40046b22.js";import{S as de,C as me,P as pe,W as he,a as fe,A as ve,D as ge,b as W,c as _e,M as Se,d as X,R as ye,e as Ae,f as Ee,B as we,g as Ce,h as xe,i as Ie,G as ze}from"./three-c4693b27.js";const Te={class:"zeus-hologram-container"},De={class:"holographic-controls"},be={class:"agent-status-panel"},Me=["onClick"],Re={class:"agent-avatar"},Le={class:"agent-info"},$e={class:"command-input-panel"},Oe={class:"holographic-input"},ke={key:0,class:"agent-response"},Ue={class:"response-header"},Ne={class:"agent-name"},Ze={class:"response-time"},Pe={class:"response-content"},je={key:0,class:"voice-indicator"},q=1e3/30,He={__name:"ZeusHologram3D",props:{width:{type:Number,default:800},height:{type:Number,default:600}},setup(J){const C=J,E=h(null),x=h(""),m=h(null);let u,c,p,_=[],D=null,I=!1,b=0,M=0,R=!0,$=0;const L=h([{name:"ZEUS",type:"zeus",description:"Núcleo principal del ecosistema empresarial",status:"inactive",position:{x:0,y:0,z:0}},{name:"PER-SEO",type:"perseo",description:"Estratega de Ventas y Crecimiento Exponencial",status:"inactive",position:{x:-3,y:0,z:0}},{name:"THALOS",type:"thalos",description:"Ciberdefensa Automatizada (ZEUS SHIELD)",status:"inactive",position:{x:3,y:0,z:0}},{name:"JUSTICIA",type:"justicia",description:"Abogada Digital",status:"inactive",position:{x:0,y:2,z:-2}},{name:"RAFAEL",type:"rafael",description:"Asistente Fiscal y Contable (España)",status:"inactive",position:{x:0,y:-2,z:-2}},{name:"ANÁLISIS",type:"analisis",description:"Análisis de datos empresariales",status:"inactive",position:{x:-2,y:2,z:0}},{name:"IA",type:"ia",description:"Inteligencia artificial avanzada",status:"inactive",position:{x:2,y:2,z:0}}]),j=te();K(async()=>{await ae(),O(),A(),k()}),Q(()=>{D&&cancelAnimationFrame(D),p&&p.dispose()});function O(){u=new de,u.background=new me(17),c=new pe(75,C.width/C.height,.1,1e3),c.position.set(0,0,10),p=new he({canvas:E.value,antialias:!0,alpha:!0}),p.setSize(C.width,C.height),p.shadowMap.enabled=!0,p.shadowMap.type=fe,H()}function H(){const t=new ve(65535,.3);u.add(t);const n=new ge(65535,1);n.position.set(5,5,5),n.castShadow=!0,u.add(n);const a=new W(16711935,.5,100);a.position.set(-5,0,5),u.add(a);const l=new W(65280,.5,100);l.position.set(5,0,5),u.add(l)}function A(){L.value.forEach((t,n)=>{S(t,n)}),F(),B()}function S(t,n){const a=new _e(.5,2,8),l=new Se({color:z(t.type),transparent:!0,opacity:.8,emissive:z(t.type),emissiveIntensity:.2}),d=new X(a,l);d.position.set(t.position.x,t.position.y,t.position.z),d.userData={agent:t},d.rotation.y=n*Math.PI/3,u.add(d),_.push(d);const y=new ye(.8,1,16),w=new Ae({color:z(t.type),transparent:!0,opacity:.3,side:Ee}),U=new X(y,w);U.position.set(t.position.x,t.position.y,t.position.z-.1),U.rotation.x=-Math.PI/2,u.add(U),_.push(U)}function z(t){return{zeus:16739072,perseo:65280,thalos:26367,justicia:16711782,rafael:65535,analisis:6684927,ia:16737792}[t]||65535}function F(){const n=new we,a=new Float32Array(30*3);for(let y=0;y<30*3;y++)a[y]=(Math.random()-.5)*20;n.setAttribute("position",new Ce(a,3));const l=new xe({color:65535,size:.1,transparent:!0,opacity:.6}),d=new Ie(n,l);u.add(d),_.push(d)}function B(){const a=new ze(20,20,65535,17476);a.position.y=-5,u.add(a),_.push(a)}function k(t=0){D=requestAnimationFrame(k);const n=t-$;if(n<q)return;$=t-n%q;const l=Date.now()*5e-4;let d=!1;_.forEach(w=>{w.userData&&w.userData.agent&&w.userData.agent.status==="active"&&(w.rotation.y+=.005,w.rotation.x+=.0025,d=!0)});let y=!1;I||(c.position.x=Math.sin(l)*10,c.position.z=Math.cos(l)*10,c.lookAt(0,0,0),y=!0),(R||d||y)&&(p.render(u,c),R=!1)}function s(){R=!0}function o(t){I=!0,b=t.clientX,s(),M=t.clientY}function i(t){if(!I)return;const n=t.clientX-b,a=t.clientY-M;c.position.x+=n*.01,c.position.y-=a*.01,b=t.clientX,M=t.clientY,s()}function g(){I=!1}function G(t){c.position.z+=t.deltaY*.01,c.position.z=Math.max(5,Math.min(20,c.position.z)),s()}function oe(t){c.position.x=t.position.x,c.position.y=t.position.y,c.position.z=t.position.z+5,c.lookAt(t.position.x,t.position.y,t.position.z),s()}async function V(){if(x.value.trim())try{const t=new AbortController,n=setTimeout(()=>t.abort(),1e4),a=await fetch("/api/v1/zeus/execute",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${j.token}`},body:JSON.stringify({command:x.value,data:{}}),signal:t.signal});clearTimeout(n);const l=await a.json();m.value=l,requestAnimationFrame(()=>{if(l.agent){const d=L.value.find(y=>y.name===l.agent);d&&(d.status=l.status==="success"?"active":"error")}}),l.voice&&setTimeout(()=>se(l.voice),100),x.value=""}catch(t){t.name==="AbortError"?m.value={agent:"ERROR",message:"Timeout: El comando tardó demasiado",timestamp:new Date().toISOString(),status:"error"}:m.value={agent:"ERROR",message:"Error ejecutando comando",timestamp:new Date().toISOString(),status:"error"}}}function se(t){if("speechSynthesis"in window){const n=new SpeechSynthesisUtterance(t);n.lang="es-ES",n.rate=.9,n.pitch=1,speechSynthesis.speak(n)}}function ne(t){return new Date(t).toLocaleTimeString()}return(t,n)=>(f(),v("div",Te,[e("canvas",{ref_key:"hologramCanvas",ref:E,class:"hologram-canvas",onMousedown:o,onMousemove:i,onMouseup:g,onWheel:G},null,544),e("div",De,[e("div",be,[(f(!0),v(Z,null,P(L.value,a=>(f(),v("div",{key:a.name,class:T(["agent-card",{active:a.status==="active"}]),onClick:l=>oe(a)},[e("div",Re,[e("div",{class:T(["holographic-avatar",a.type])},r(a.name.charAt(0)),3)]),e("div",Le,[e("h3",null,r(a.name),1),e("p",null,r(a.description),1),e("div",{class:T(["status-indicator",a.status])},r(a.status.toUpperCase()),3)])],10,Me))),128))]),e("div",$e,[e("div",Oe,[ie(e("input",{"onUpdate:modelValue":n[0]||(n[0]=a=>x.value=a),onKeyup:ce(V,["enter"]),placeholder:"Ingresa comando ZEUS...",class:"command-input"},null,544),[[re,x.value]]),e("button",{onClick:V,class:"execute-btn"}," EJECUTAR ")]),m.value?(f(),v("div",ke,[e("div",Ue,[e("span",Ne,r(m.value.agent),1),e("span",Ze,r(ne(m.value.timestamp)),1)]),e("div",Pe,[e("p",null,r(m.value.message),1),m.value.voice?(f(),v("div",je," 🔊 "+r(m.value.voice),1)):Y("",!0)])])):Y("",!0)])]),n[1]||(n[1]=e("div",{class:"holographic-background"},[e("div",{class:"grid-lines"}),e("div",{class:"particles"})],-1))]))}},Fe=ee(He,[["__scopeId","data-v-36b6b16a"]]);const Be={class:"zeus-core-container"},Ge={class:"zeus-header"},Je={class:"zeus-logo"},Ve={class:"user-info"},Ye={class:"user-name"},We={class:"zeus-main"},Xe={class:"info-panel"},qe={class:"panel-section"},Ke={class:"system-metrics"},Qe={class:"metric"},et={class:"metric-value"},tt={class:"metric"},ot={class:"metric-value"},st={class:"metric"},nt={class:"metric-value"},at={class:"panel-section"},it={class:"command-list"},rt=["onClick"],ct={class:"panel-section"},lt={class:"logs-container"},ut={class:"log-time"},dt={class:"log-message"},mt={class:"notifications-container"},pt=["onClick"],ht={class:"notification-icon"},ft={class:"notification-content"},vt={__name:"ZeusCore",setup(J){const C=ue(),E=te(),x=h(null),m=h("inactive"),u=h(0),c=h(0),p=h([]),_=h([]),D=h(new Date),I=N(()=>E.user?.email||"Usuario"),b=N(()=>window.innerWidth-300),M=N(()=>window.innerHeight-100),R=N(()=>{const o=new Date-D.value,i=Math.floor(o/6e4),g=Math.floor(o%6e4/1e3);return`${i}:${g.toString().padStart(2,"0")}`}),$=h(["ZEUS.ACTIVAR","ZEUS.ANALIZAR","PERSEO.FUNNEL","PERSEO.SEO","PERSEO.COPY","THALOS.SHIELD","THALOS.SCAN","JUSTICIA.CONTRATO","JUSTICIA.RGPD","RAFAEL.IVA","RAFAEL.IRPF","RAFAEL.IS","ANALISIS.PROCESAR","IA.PROCESAR"]);K(async()=>{if(!E.isAuthenticated){C.push("/auth/login");return}Promise.resolve().then(async()=>{try{await L()}catch{}}),A("info","Núcleo ZEUS-IA inicializado correctamente"),S("success","Sistema Activado","Núcleo ZEUS-IA operativo")}),Q(()=>{});async function L(){try{const s=await fetch("/api/v1/zeus/activate",{method:"POST",headers:{Authorization:`Bearer ${E.token}`,"Content-Type":"application/json"}});if(s.ok){const o=await s.json();m.value="active",u.value=o.data?.agents?Object.keys(o.data.agents).length:0,A("success","Sistema ZEUS activado correctamente"),S("success","ZEUS Activado","Todos los agentes están operativos")}else throw new Error("Error activando sistema ZEUS")}catch(s){A("error",`Error inicializando sistema: ${s.message}`),S("error","Error de Inicialización",s.message)}}function j(s){A("success",`Agente ${s.name} activado`),S("info","Agente Activado",`${s.name} está operativo`)}function O(s){c.value++,A("info",`Comando ejecutado: ${s.command}`),s.status==="success"?S("success","Comando Exitoso",s.message):S("error","Error en Comando",s.message)}async function H(s){try{const o=new AbortController,i=setTimeout(()=>o.abort(),1e4),g=await fetch("/api/v1/zeus/execute",{method:"POST",headers:{Authorization:`Bearer ${E.token}`,"Content-Type":"application/json"},body:JSON.stringify({command:s,data:{}}),signal:o.signal});if(clearTimeout(i),g.ok){const G=await g.json();O(G)}else throw new Error("Error ejecutando comando")}catch(o){o.name==="AbortError"?(A("warning",`Timeout ejecutando ${s}`),S("warning","Timeout de Comando",`El comando ${s} tardó demasiado`)):(A("error",`Error ejecutando ${s}: ${o.message}`),S("error","Error de Comando",o.message))}}function A(s,o){const i={id:Date.now(),type:s,message:o,timestamp:new Date().toISOString()};p.value.push(i),p.value.length>50&&p.value.shift()}function S(s,o,i){const g={id:Date.now(),type:s,title:o,message:i,timestamp:new Date().toISOString()};_.value.push(g),setTimeout(()=>{z(g.id)},5e3)}function z(s){const o=_.value.findIndex(i=>i.id===s);o>-1&&_.value.splice(o,1)}function F(s){return{success:"✅",error:"❌",warning:"⚠️",info:"ℹ️"}[s]||"ℹ️"}function B(s){return new Date(s).toLocaleTimeString()}function k(){E.logout(),C.push("/auth/login")}return(s,o)=>(f(),v("div",Be,[e("header",Ge,[e("div",Je,[o[0]||(o[0]=e("div",{class:"logo-icon"},"⚡",-1)),o[1]||(o[1]=e("h1",null,"NÚCLEO ZEUS-IA",-1)),e("div",{class:T(["status-indicator",m.value])},r(m.value.toUpperCase()),3)]),e("div",Ve,[e("span",Ye,r(I.value),1),e("button",{onClick:k,class:"logout-btn"},"SALIR")])]),e("main",We,[le(Fe,{ref_key:"hologram3D",ref:x,width:b.value,height:M.value,onAgentActivated:j,onCommandExecuted:O},null,8,["width","height"]),e("aside",Xe,[e("div",qe,[o[5]||(o[5]=e("h3",null,"ESTADO DEL SISTEMA",-1)),e("div",Ke,[e("div",Qe,[o[2]||(o[2]=e("span",{class:"metric-label"},"Agentes Activos:",-1)),e("span",et,r(u.value)+"/6",1)]),e("div",tt,[o[3]||(o[3]=e("span",{class:"metric-label"},"Comandos Ejecutados:",-1)),e("span",ot,r(c.value),1)]),e("div",st,[o[4]||(o[4]=e("span",{class:"metric-label"},"Tiempo de Actividad:",-1)),e("span",nt,r(R.value),1)])])]),e("div",at,[o[6]||(o[6]=e("h3",null,"COMANDOS DISPONIBLES",-1)),e("div",it,[(f(!0),v(Z,null,P($.value,i=>(f(),v("div",{key:i,class:"command-item",onClick:g=>H(i)},r(i),9,rt))),128))])]),e("div",ct,[o[7]||(o[7]=e("h3",null,"LOGS DEL SISTEMA",-1)),e("div",lt,[(f(!0),v(Z,null,P(p.value.slice(-5),i=>(f(),v("div",{key:i.id,class:T(["log-entry",i.type])},[e("span",ut,r(B(i.timestamp)),1),e("span",dt,r(i.message),1)],2))),128))])])])]),e("div",mt,[(f(!0),v(Z,null,P(_.value,i=>(f(),v("div",{key:i.id,class:T(["notification",i.type]),onClick:g=>z(i.id)},[e("div",ht,r(F(i.type)),1),e("div",ft,[e("h4",null,r(i.title),1),e("p",null,r(i.message),1)])],10,pt))),128))])]))}},yt=ee(vt,[["__scopeId","data-v-af84a6d0"]]);export{yt as default};
