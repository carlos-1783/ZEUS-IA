import{r as x,q as $,J as Q,y as ee,o as h,b as v,e as s,F as te,E as oe,n as E,t as p,K as se,L as ae,M as ne,g as L}from"./vendor-ab4a1d36.js";import{S as ie,C as re,P as ce,W as le,a as ue,A as pe,D as de,b as T,c as me,M as fe,d as H,R as he,e as ve,f as ge,B as ye,g as we,h as _e,i as xe,G as Se}from"./three-c4693b27.js";import{_ as Ae,u as Me}from"./index-5604b34d.js";const ze={class:"zeus-hologram-container"},Ce={class:"holographic-controls"},be={class:"agent-status-panel"},Ee=["onClick"],De={class:"agent-avatar"},Re={class:"agent-info"},ke={class:"command-input-panel"},Ie={class:"holographic-input"},Le={key:0,class:"agent-response"},Te={class:"response-header"},He={class:"agent-name"},Pe={class:"response-time"},Ue={class:"response-content"},Oe={key:0,class:"voice-indicator"},P=1e3/30,Fe={__name:"ZeusHologram3D",props:{width:{type:Number,default:800},height:{type:Number,default:600}},setup(U){const g=U,D=x(null),m=x(""),l=x(null);let r,n,d,f=[],S=null,y=!1,A=0,M=0,z=!0,R=0;const C=x([{name:"ZEUS",type:"zeus",description:"Núcleo principal del ecosistema empresarial",status:"inactive",position:{x:0,y:0,z:0}},{name:"PER-SEO",type:"perseo",description:"Estratega de Ventas y Crecimiento Exponencial",status:"inactive",position:{x:-3,y:0,z:0}},{name:"THALOS",type:"thalos",description:"Ciberdefensa Automatizada (ZEUS SHIELD)",status:"inactive",position:{x:3,y:0,z:0}},{name:"JUSTICIA",type:"justicia",description:"Abogada Digital",status:"inactive",position:{x:0,y:2,z:-2}},{name:"RAFAEL",type:"rafael",description:"Asistente Fiscal y Contable (España)",status:"inactive",position:{x:0,y:-2,z:-2}},{name:"ANÁLISIS",type:"analisis",description:"Análisis de datos empresariales",status:"inactive",position:{x:-2,y:2,z:0}},{name:"IA",type:"ia",description:"Inteligencia artificial avanzada",status:"inactive",position:{x:2,y:2,z:0}}]),O=Me();$(async()=>{await Q(),F(),B(),k()}),ee(()=>{S&&cancelAnimationFrame(S),d&&d.dispose()});function F(){r=new ie,r.background=new re(17),n=new ce(75,g.width/g.height,.1,1e3),n.position.set(0,0,10),d=new le({canvas:D.value,antialias:!0,alpha:!0}),d.setSize(g.width,g.height),d.shadowMap.enabled=!0,d.shadowMap.type=ue,Z()}function Z(){const e=new pe(65535,.3);r.add(e);const t=new de(65535,1);t.position.set(5,5,5),t.castShadow=!0,r.add(t);const o=new T(16711935,.5,100);o.position.set(-5,0,5),r.add(o);const a=new T(65280,.5,100);a.position.set(5,0,5),r.add(a)}function B(){C.value.forEach((e,t)=>{G(e,t)}),N(),Y()}function G(e,t){const o=new me(.5,2,8),a=new fe({color:b(e.type),transparent:!0,opacity:.8,emissive:b(e.type),emissiveIntensity:.2}),i=new H(o,a);i.position.set(e.position.x,e.position.y,e.position.z),i.userData={agent:e},i.rotation.y=t*Math.PI/3,r.add(i),f.push(i);const c=new he(.8,1,16),u=new ve({color:b(e.type),transparent:!0,opacity:.3,side:ge}),_=new H(c,u);_.position.set(e.position.x,e.position.y,e.position.z-.1),_.rotation.x=-Math.PI/2,r.add(_),f.push(_)}function b(e){return{zeus:16739072,perseo:65280,thalos:26367,justicia:16711782,rafael:65535,analisis:6684927,ia:16737792}[e]||65535}function N(){const t=new ye,o=new Float32Array(30*3);for(let c=0;c<30*3;c++)o[c]=(Math.random()-.5)*20;t.setAttribute("position",new we(o,3));const a=new _e({color:65535,size:.1,transparent:!0,opacity:.6}),i=new xe(t,a);r.add(i),f.push(i)}function Y(){const o=new Se(20,20,65535,17476);o.position.y=-5,r.add(o),f.push(o)}function k(e=0){S=requestAnimationFrame(k);const t=e-R;if(t<P)return;R=e-t%P;const a=Date.now()*5e-4;let i=!1;f.forEach(u=>{u.userData&&u.userData.agent&&u.userData.agent.status==="active"&&(u.rotation.y+=.005,u.rotation.x+=.0025,i=!0)});let c=!1;y||(n.position.x=Math.sin(a)*10,n.position.z=Math.cos(a)*10,n.lookAt(0,0,0),c=!0),(z||i||c)&&(d.render(r,n),z=!1)}function w(){z=!0}function j(e){y=!0,A=e.clientX,w(),M=e.clientY}function J(e){if(!y)return;const t=e.clientX-A,o=e.clientY-M;n.position.x+=t*.01,n.position.y-=o*.01,A=e.clientX,M=e.clientY,w()}function X(){y=!1}function q(e){n.position.z+=e.deltaY*.01,n.position.z=Math.max(5,Math.min(20,n.position.z)),w()}function V(e){n.position.x=e.position.x,n.position.y=e.position.y,n.position.z=e.position.z+5,n.lookAt(e.position.x,e.position.y,e.position.z),w()}async function I(){if(m.value.trim())try{const e=new AbortController,t=setTimeout(()=>e.abort(),1e4),o=await fetch("/api/v1/zeus/execute",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O.token}`},body:JSON.stringify({command:m.value,data:{}}),signal:e.signal});clearTimeout(t);const a=await o.json();l.value=a,requestAnimationFrame(()=>{if(a.agent){const i=C.value.find(c=>c.name===a.agent);i&&(i.status=a.status==="success"?"active":"error")}}),a.voice&&setTimeout(()=>W(a.voice),100),m.value=""}catch(e){e.name==="AbortError"?l.value={agent:"ERROR",message:"Timeout: El comando tardó demasiado",timestamp:new Date().toISOString(),status:"error"}:l.value={agent:"ERROR",message:"Error ejecutando comando",timestamp:new Date().toISOString(),status:"error"}}}function W(e){if("speechSynthesis"in window){const t=new SpeechSynthesisUtterance(e);t.lang="es-ES",t.rate=.9,t.pitch=1,speechSynthesis.speak(t)}}function K(e){return new Date(e).toLocaleTimeString()}return(e,t)=>(h(),v("div",ze,[s("canvas",{ref_key:"hologramCanvas",ref:D,class:"hologram-canvas",onMousedown:j,onMousemove:J,onMouseup:X,onWheel:q},null,544),s("div",Ce,[s("div",be,[(h(!0),v(te,null,oe(C.value,o=>(h(),v("div",{key:o.name,class:E(["agent-card",{active:o.status==="active"}]),onClick:a=>V(o)},[s("div",De,[s("div",{class:E(["holographic-avatar",o.type])},p(o.name.charAt(0)),3)]),s("div",Re,[s("h3",null,p(o.name),1),s("p",null,p(o.description),1),s("div",{class:E(["status-indicator",o.status])},p(o.status.toUpperCase()),3)])],10,Ee))),128))]),s("div",ke,[s("div",Ie,[se(s("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>m.value=o),onKeyup:ne(I,["enter"]),placeholder:"Ingresa comando ZEUS...",class:"command-input"},null,544),[[ae,m.value]]),s("button",{onClick:I,class:"execute-btn"}," EJECUTAR ")]),l.value?(h(),v("div",Le,[s("div",Te,[s("span",He,p(l.value.agent),1),s("span",Pe,p(K(l.value.timestamp)),1)]),s("div",Ue,[s("p",null,p(l.value.message),1),l.value.voice?(h(),v("div",Oe," 🔊 "+p(l.value.voice),1)):L("",!0)])])):L("",!0)])]),t[1]||(t[1]=s("div",{class:"holographic-background"},[s("div",{class:"grid-lines"}),s("div",{class:"particles"})],-1))]))}},Ne=Ae(Fe,[["__scopeId","data-v-36b6b16a"]]);export{Ne as Z};
