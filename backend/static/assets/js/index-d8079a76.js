import{d as Ae,o as H,c as f,a as L,u as Y,r as F,b as m,e as x,f as je,i as Le,g as Me,h as I,j as ce,k as e,w as V,n as T,t as w,l as $,m as Oe,p as P,q as ve,F as ne,s as le,v as Z,T as De,x as Pe,y as Ue,z as ue,A as ge,C as me,B as Ve,D as fe,E as qe,G as Fe,H as we,I as ye,J as j,K as U,L as Ie,M as ae,N as ee,O as he,P as Be,Q as He,R as Ze,S as Je}from"./vendor-f1ee3dc2.js";const Ke={id:"app"},We=Ae({__name:"App",setup(t){return Y(),H(()=>{}),(s,o)=>{const r=F("RouterView");return m(),f("div",Ke,[L(r)])}}});const q=(t,s)=>{const o=t.__vccOpts||t;for(const[r,a]of s)o[r]=a;return o},Ye=q(We,[["__scopeId","data-v-d7ce5478"]]),Ge=function(){const s=typeof document<"u"&&document.createElement("link").relList;return s&&s.supports&&s.supports("modulepreload")?"modulepreload":"preload"}(),Xe=function(t){return"/"+t},be={},ke=function(s,o,r){if(!o||o.length===0)return s();const a=document.getElementsByTagName("link");return Promise.all(o.map(i=>{if(i=Xe(i),i in be)return;be[i]=!0;const l=i.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(!!r)for(let n=a.length-1;n>=0;n--){const g=a[n];if(g.href===i&&(!l||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${u}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":Ge,l||(h.as="script",h.crossOrigin=""),h.href=i,document.head.appendChild(h),l)return new Promise((n,g)=>{h.addEventListener("load",n),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>s()).catch(i=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i})},Qe=t=>{if(!t||typeof t!="string"||t.trim()==="")return null;const s=et(t);if(!s)return null;try{const o=s.split(".");if(o.length!==3)return null;const r=o[1],i=r.padEnd(r.length+(4-r.length%4)%4,"=").replace(/\-/g,"+").replace(/_/g,"/");try{const l=decodeURIComponent(atob(i).split("").map(v=>"%"+("00"+v.charCodeAt(0).toString(16)).slice(-2)).join("")),u=JSON.parse(l);if(u&&typeof u=="object"&&"exp"in u){const v=u.exp}return u}catch{return null}}catch{return null}};x(!1);const et=t=>{if(!t)return null;try{let s=String(t).replace(/[\u0000-\u001F\u007F-\u009F\u2000-\u200F\u2028-\u202F\u205F-\u206F\u3000\uFEFF]/g,"").trim();if(s=s.replace(/^[^a-zA-Z0-9]*bearer[^a-zA-Z0-9]*(.*)/i,(r,a)=>a||"").trim(),!s)return null;const o=s.split(".");if(o.length!==3)return null;try{o.forEach(r=>{const a=r.padEnd(r.length+(4-r.length%4)%4,"=");atob(a)})}catch{return null}return s}catch{return null}},Q="auth_token",te="refresh_token",Ee="refresh_timeout",de="Bearer ",k={setToken:t=>{if(t)try{localStorage.setItem(Q,t),R.defaults.headers.common.Authorization=`${de}${t}`}catch{}else localStorage.removeItem(Q),delete R.defaults.headers.common.Authorization},getToken:()=>typeof window>"u"?null:localStorage.getItem(Q),setRefreshToken:t=>{if(t)try{localStorage.setItem(te,t)}catch{}else localStorage.removeItem(te)},getRefreshToken:()=>typeof window>"u"?null:localStorage.getItem(te),removeTokens:()=>{localStorage.removeItem(Q),localStorage.removeItem(te),localStorage.removeItem(Ee),delete R.defaults.headers.common.Authorization,window.tokenRefreshTimeout&&(clearTimeout(window.tokenRefreshTimeout),delete window.tokenRefreshTimeout)},removeToken:()=>{localStorage.removeItem(Q),delete R.defaults.headers.common.Authorization},isTokenExpired:t=>{if(!t)return!0;try{const s=Qe(t);if(!s?.exp)return!0;const o=Date.now()/1e3;return s.exp<o}catch{return!0}},isValidToken:t=>t?t.split(".").length===3&&!k.isTokenExpired(t):!1,clearTokens:()=>{localStorage.removeItem(Q),localStorage.removeItem(te),localStorage.removeItem(Ee),delete R.defaults.headers.common.Authorization,window.tokenRefreshTimeout&&(clearTimeout(window.tokenRefreshTimeout),delete window.tokenRefreshTimeout)},getTokenPayload:t=>{if(!t)return null;try{const s=t.split(".");if(s.length!==3)return null;const o=s[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(o).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(r)}catch{return null}},refreshToken:function(){throw new Error("Function not implemented.")}},R=je.create({baseURL:"http://localhost:8000/api/v1",timeout:3e4,headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},withCredentials:!0,xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken"});R.interceptors.request.use(t=>{const s=k.getToken();return s&&(t.headers.Authorization=`${de}${s}`),t.headers["Access-Control-Allow-Origin"]=window.location.origin,t.headers["Access-Control-Allow-Methods"]="GET, POST, PUT, DELETE, OPTIONS",t.headers["Access-Control-Allow-Headers"]="Content-Type, Authorization, X-Requested-With",t.method?.toLowerCase()==="options"&&(t.headers["Access-Control-Max-Age"]="86400"),t},t=>Promise.reject(t));R.interceptors.request.use(t=>{const s=t.url?.includes("auth/login")||t.url?.includes("auth/refresh-token"),o=k.getToken();return o&&!s&&(t.headers.Authorization=`Bearer ${o}`),t.method?.toLowerCase()==="get"&&(t.params={...t.params,_t:Date.now()}),t},t=>Promise.reject(t));const tt=async()=>{const t=k.getRefreshToken();if(!t)return k.clearTokens(),!1;try{const s=await R.post("auth/refresh-token",{refresh_token:t},{skipAuthRefresh:!0});if(s.data.status==="success"&&s.data.data){const{access_token:o,refresh_token:r}=s.data.data;return k.setToken(o),r&&k.setRefreshToken(r),!0}return!1}catch{return k.clearTokens(),!1}};R.interceptors.response.use(t=>t,async t=>{const s=t.config;if(!t.response)return Promise.reject(N("network_error","Error de red",t));if(t.response?.status!==401||s._retry)return Promise.reject(t);if(s._retry=!0,await tt()){const r=k.getToken();if(r)return s.headers.Authorization=`Bearer ${r}`,R(s)}return Promise.reject(t)});const ze=t=>{if(window.tokenRefreshTimeout!==void 0){const o=window.tokenRefreshTimeout;clearTimeout(o),window.tokenRefreshTimeout=void 0}const s=Math.max(t-300,60)*1e3;window.tokenRefreshTimeout=window.setTimeout(async()=>{try{const o=k.getRefreshToken();o?await _e.refreshToken(o):k.removeTokens()}catch{k.removeTokens(),window.dispatchEvent(new Event("unauthorized"))}},s)},Ne=async t=>{if(!t)throw new Error("No refresh token provided");try{const s=await R.post("auth/refresh-token",{refresh_token:t},{skipAuthRefresh:!0});if(s.data.status==="success"&&s.data.data){const{access_token:o,refresh_token:r,expires_in:a}=s.data.data;if(k.setToken(o),r&&k.setRefreshToken(r),a){const i=Math.max(a-300,60);ze(i)}return s.data.data}throw new Error(s.data.error||"Failed to refresh token")}catch(s){throw Le(s)&&s.response?.status===401&&(k.removeTokens(),window.dispatchEvent(new Event("unauthorized"))),s}};R.interceptors.request.use(t=>{if(t.url?.includes("auth/"))return t;const s=k.getToken();return s&&(t.headers.Authorization=`${de}${s}`),t.method?.toLowerCase()==="get"&&(t.params={...t.params,_t:Date.now()}),t},t=>Promise.reject(t));R.interceptors.response.use(t=>(t.config.url?.includes("auth/"),t),async t=>{const s=t.config;if(!t.response)return Promise.reject(N("network_error","Network error",t));const{status:o,data:r}=t.response;if(o===401&&!s._retry){if(s.url?.includes("auth/login")||s.url?.includes("auth/refresh-token"))return Promise.reject(N("auth_error","Invalid credentials",t,r));s._retry=!0;try{const a=k.getRefreshToken();if(!a)return k.removeTokens(),window.dispatchEvent(new Event("unauthorized")),Promise.reject(N("no_refresh_token","Session expired",t));try{const i=await Ne(a);if(i.access_token)return s.headers=s.headers||{},s.headers.Authorization=`${de}${i.access_token}`,R(s)}catch(i){return k.removeTokens(),window.dispatchEvent(new Event("unauthorized")),Promise.reject(N("token_refresh_failed","Session refresh failed",i))}}catch(a){return k.removeTokens(),window.dispatchEvent(new Event("unauthorized")),Promise.reject(N("token_refresh_failed","Session refresh failed",a))}}switch(o){case 400:return Promise.reject(N("bad_request","Bad request",t,r));case 403:return k.removeTokens(),window.dispatchEvent(new Event("unauthorized")),Promise.reject(N("forbidden","Forbidden",t,r));case 404:return Promise.reject(N("not_found","Resource not found",t,r));case 422:return Promise.reject(N("validation_error","Validation error",t,r));case 429:return Promise.reject(N("too_many_requests","Too many requests",t,r));case 500:return Promise.reject(N("server_error","Internal server error",t,r));case 503:return Promise.reject(N("service_unavailable","Service unavailable",t,r));default:return Promise.reject(N("api_error","API request failed",t,r))}});const _e={login:async t=>{const s=new FormData;s.append("username",t.username),s.append("password",t.password),s.append("grant_type","password");const o=await R.post("auth/login",s,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});if(o.data&&o.data.access_token){const{access_token:r,refresh_token:a,expires_in:i}=o.data;if(k.setToken(r),a&&k.setRefreshToken(a),i){const l=Math.max(i-300,60);ze(l)}return o.data}throw new Error(o.data?.detail||"Login failed")},logout:async()=>{try{const t=k.getRefreshToken();t&&await R.post("auth/logout",{refresh_token:t})}catch{}finally{k.removeTokens(),window.location.href="/login"}},refreshToken:Ne,getCurrentUser:async()=>{const t=await R.get("auth/me");if(t.data&&t.data.data)return t.data.data;throw new Error(t.data?.detail||"Failed to fetch user profile")},getSystemStatus:async()=>{const t=await R.get("/system/status");if(t.data.status==="success"&&t.data.data)return t.data.data;throw new Error(t.data.error||"Failed to fetch system status")},request:async t=>{const s=await R.request(t);if(s.data.status==="success")return s.data.data;throw new Error(s.data.error||"API request failed")}};function N(t,s,o,r){const a=new Error(s);return a.code=t,a.originalError=o,a.details=r,Le(o)&&(a.status=o.response?.status,a.statusText=o.response?.statusText),a}const se="auth_token",ie="refresh_token",st=t=>"error"in t||"detail"in t,$e=t=>"access_token"in t,K=_e,G=Me("auth",()=>{const t=x(localStorage.getItem(se)),s=x(localStorage.getItem(ie)),o=x(null),r=x(!1),a=x(null),i=I(()=>!!t.value),l=I(()=>!!o.value?.is_superuser);function u(){return t.value||localStorage.getItem(se)}function v(){return s.value||localStorage.getItem(ie)}function h(_){try{if(!_.access_token||!_.refresh_token)throw new Error("Invalid tokens provided");return t.value=_.access_token,s.value=_.refresh_token,localStorage.setItem(se,_.access_token),localStorage.setItem(ie,_.refresh_token),K.setAuthToken&&K.setAuthToken(_.access_token),!0}catch{return n(),!1}}function n(){t.value=null,s.value=null,o.value=null,a.value=null,localStorage.removeItem(se),localStorage.removeItem(ie)}function g(_){try{if(!_)return!1;const c=ce(_);return o.value={id:c.sub,email:c.email||"",name:c.name||"User",is_active:c.is_active||!1,is_superuser:c.is_superuser||!1},!0}catch{return n(),!1}}async function d(_,c){if(r.value=!0,a.value=null,n(),!_||!c)return r.value=!1,{success:!1,error:"Email and password are required"};try{if(typeof localStorage>"u")throw new Error("localStorage is not available");const p="__auth_test__";try{localStorage.setItem(p,"test"),localStorage.removeItem(p)}catch{throw new Error("Could not access local storage")}const S=await K.login({username:_.trim(),password:c});if(st(S)){const z=S.error||S.detail||"Credenciales inválidas";throw new Error(z)}if(!$e(S)){const z="Formato de respuesta inválido";throw new Error(z)}if(!S||typeof S!="object"){const z="Invalid server response format";throw new Error(z)}if(!$e(S)){const z="Invalid response format: missing access_token";throw new Error(z)}const y=S;try{const z=ce(y.access_token),X={access_token:y.access_token,refresh_token:y.refresh_token||"",expires_in:y.expires_in||3600,token_type:y.token_type||"Bearer"};if(X.refresh_token,!h(X))throw new Error("Failed to save tokens");if(g(X.access_token),!localStorage.getItem(se))throw new Error("Could not verify saved token");return{success:!0,message:"Login successful",access_token:X.access_token,refresh_token:X.refresh_token,expires_in:X.expires_in}}catch{throw n(),new Error("Invalid or corrupted token")}}catch(p){const S=p.message||"Login failed";return a.value=S,n(),{success:!1,error:S}}finally{r.value=!1}}async function E(){try{if(t.value)try{await K.logout()}catch{}n()}catch(_){throw n(),_}}async function C(){const _=v();if(!_||r.value)return!1;r.value=!0;try{const c=await K.refreshToken(_);if(c.access_token){if(!h({access_token:c.access_token,refresh_token:c.refresh_token||_,expires_in:c.expires_in,token_type:c.token_type||"Bearer"}))throw new Error("Failed to update tokens after refresh");return g(c.access_token),!0}else throw new Error("Invalid token refresh response")}catch(c){return c instanceof Error&&(c.message.includes("401")||c.message.includes("invalid_grant")||c.message.includes("invalid_token")||c.message.includes("Network error"))&&await E(),!1}finally{r.value=!1}}async function M(){try{const _=u(),c=v();if(!_||!c)return!1;K.setAuthToken&&K.setAuthToken(_);const p=ce(_),S=Math.floor(Date.now()/1e3);if(p.exp?p.exp<S:!0)return n(),!1;t.value=_,s.value=c;try{return g(_),!0}catch{return!0}}catch{return!1}}return{token:t,refreshToken:s,user:o,isLoading:r,error:a,isAuthenticated:i,isAdmin:l,login:d,logout:E,initialize:M,refreshAccessToken:C,resetAuthState:n,getToken:u,getRefreshToken:v,updateUserFromToken:g,setAuthTokens:h}});const ot={class:"min-h-screen flex flex-col bg-gray-50"},rt={class:"bg-white shadow-sm"},nt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},at={class:"flex justify-between items-center"},it={class:"flex-shrink-0"},lt={class:"text-2xl font-bold text-indigo-600"},dt={class:"hidden md:flex space-x-8"},ct={class:"flex-grow flex items-center justify-center p-4"},ut={class:"w-full max-w-md"},mt={class:"bg-white p-8 rounded-lg shadow-md"},ft={class:"text-center mb-8"},pt={class:"text-2xl font-bold text-gray-900"},gt={key:0,class:"mt-2 text-sm text-gray-600"},vt={class:"bg-white border-t border-gray-200"},ht={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},_t={class:"text-center text-sm text-gray-500"},xt={__name:"AuthLayout",setup(t){const s=Y(),o=I(()=>s.meta.title||"Bienvenido a ZEUS-IA"),r=I(()=>s.meta.description||"");return(a,i)=>{const l=F("router-link");return m(),f("div",ot,[e("header",rt,[e("div",nt,[e("div",at,[e("div",it,[e("h1",lt,[L(l,{to:"/"},{default:V(()=>i[0]||(i[0]=[P("ZEUS-IA")])),_:1,__:[0]})])]),e("nav",dt,[L(l,{to:"/auth/login",class:T(["text-gray-700 hover:text-indigo-600 px-3 py-2 text-sm font-medium",{"text-indigo-600 border-b-2 border-indigo-600":a.$route.name==="Login"}])},{default:V(()=>i[1]||(i[1]=[P(" Iniciar sesión ")])),_:1,__:[1]},8,["class"]),L(l,{to:"/auth/register",class:T(["text-gray-700 hover:text-indigo-600 px-3 py-2 text-sm font-medium",{"text-indigo-600 border-b-2 border-indigo-600":a.$route.name==="Register"}])},{default:V(()=>i[2]||(i[2]=[P(" Crear cuenta ")])),_:1,__:[2]},8,["class"])])])])]),e("main",ct,[e("div",ut,[e("div",mt,[e("div",ft,[e("h2",pt,w(o.value),1),r.value?(m(),f("p",gt,w(r.value),1)):$("",!0)]),Oe(a.$slots,"default",{},void 0,!0)])])]),e("footer",vt,[e("div",ht,[e("p",_t," © "+w(new Date().getFullYear())+" ZEUS-IA. Todos los derechos reservados. ",1)])])])}}},wt=q(xt,[["__scopeId","data-v-e2d4456a"]]);const yt={class:"min-h-screen bg-gray-100 flex"},bt={class:"md:hidden fixed top-4 left-4 z-50"},kt={class:"flex flex-col h-full bg-indigo-700 w-64 shadow-lg"},Et={class:"flex-1 px-2 py-4 space-y-1"},$t={class:"p-4 border-t border-indigo-600"},Tt={class:"flex items-center"},St={class:"flex-shrink-0"},Ct=["src"],Rt={class:"ml-3"},At={class:"text-sm font-medium text-white"},Lt={class:"flex-1 flex flex-col md:pl-64"},Pt={class:"bg-white shadow-sm"},It={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center"},zt={class:"text-lg font-semibold text-gray-900"},Nt={class:"flex-1"},jt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Mt={__name:"MainLayout",setup(t){const s=Y(),o=Z(),r=G(),a=x(window.innerWidth>=768),i=[{name:"Dashboard",route:"Dashboard",icon:"tachometer-alt"}],l=I(()=>s.meta.title||"Dashboard"),u=I(()=>r.userFullName),v=I(()=>`https://ui-avatars.com/api/?name=${encodeURIComponent(u.value||"U")}&background=4f46e5&color=fff`),h=async()=>{await r.logout(),o.push({name:"Login"})},n=()=>{a.value=window.innerWidth>=768};return H(()=>{window.addEventListener("resize",n),n()}),ve(()=>{window.removeEventListener("resize",n)}),(g,d)=>{const E=F("font-awesome-icon"),C=F("router-link"),M=F("router-view");return m(),f(ne,null,[e("div",yt,[e("div",bt,[e("button",{onClick:d[0]||(d[0]=_=>a.value=!a.value),class:"p-2 rounded-md text-gray-700 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500"},d[2]||(d[2]=[e("span",{class:"sr-only"},"Abrir menú",-1),e("svg",{class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]))]),e("div",{class:T(["fixed inset-y-0 left-0 transform md:translate-x-0 transition duration-300 ease-in-out z-40",{"translate-x-0":a.value,"-translate-x-full":!a.value}])},[e("div",kt,[d[3]||(d[3]=e("div",{class:"flex items-center justify-center h-16 px-4 bg-indigo-800"},[e("h1",{class:"text-white text-xl font-bold"},"ZEUS-IA")],-1)),e("nav",Et,[(m(),f(ne,null,le(i,_=>L(C,{key:_.name,to:{name:_.route},class:T(["group flex items-center px-4 py-3 text-sm font-medium rounded-md text-indigo-100 hover:bg-indigo-600 hover:bg-opacity-75",{"bg-indigo-800":g.$route.name===_.route}])},{default:V(()=>[L(E,{icon:_.icon,class:"mr-3 h-5 w-5 text-indigo-300 group-hover:text-indigo-200","aria-hidden":"true"},null,8,["icon"]),P(" "+w(_.name),1)]),_:2},1032,["to","class"])),64))]),e("div",$t,[e("div",Tt,[e("div",St,[e("img",{class:"h-10 w-10 rounded-full",src:v.value,alt:"User avatar"},null,8,Ct)]),e("div",Rt,[e("p",At,w(u.value||"Usuario"),1),e("button",{onClick:h,class:"text-xs font-medium text-indigo-200 hover:text-white"}," Cerrar sesión ")])])])])],2),e("div",Lt,[e("header",Pt,[e("div",It,[e("h1",zt,w(l.value),1),d[4]||(d[4]=e("div",{class:"flex items-center space-x-4"},null,-1))])]),e("main",Nt,[e("div",jt,[L(M,null,{default:V(({Component:_})=>[L(De,{name:"fade",mode:"out-in"},{default:V(()=>[(m(),Pe(Ue(_)))]),_:2},1024)]),_:1})])])])]),a.value?(m(),f("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden",onClick:d[1]||(d[1]=_=>a.value=!1)})):$("",!0)],64)}}},Ot=q(Mt,[["__scopeId","data-v-6d9b38fd"]]);var B=(t=>(t.CONNECT="connect",t.DISCONNECT="disconnect",t.RECONNECT="reconnect",t.RECONNECTING="reconnecting",t.MESSAGE="message",t.SYSTEM_STATUS="system_status",t.AUTH_RESPONSE="auth_response",t.ERROR="error",t.AUTH_ERROR="auth_error",t.CONNECTION_ERROR="connection_error",t.STATUS_UPDATE="status_update",t.CUSTOM="custom",t))(B||{});const A=x("disconnected"),oe=x(!1),O=x(null);let b=null,re=0;const Te=3;let W=null,pe=null;const J={};Object.values(B).forEach(t=>{J[t]=new Set});const Dt=()=>{b&&(b.close(1e3,"Componente desmontado"),b=null),W&&(clearTimeout(W),W=null)},D={addEventListener(t,s){const o=t;return J[o]||(J[o]=new Set),J[o].add(s),()=>{this.removeEventListener(t,s)}},removeEventListener(t,s){const o=t;J[o]&&J[o].delete(s)},emit(t,s){const o={type:t,data:s,timestamp:new Date().toISOString()},r=J[t];r&&r.forEach(a=>{try{a(o)}catch{}})},_scheduleReconnect(){if(re>=Te){A.value="error";return}const t=Math.min(2e3*Math.pow(2,re),1e4);re++,A.value="reconnecting",W=setTimeout(()=>{pe&&this.connect(pe).catch(s=>{re<Te&&this._scheduleReconnect()})},t)},async connect(t){try{if(b&&this.disconnect(),!t||t.trim()==="")throw new Error("No se proporcionó un token de autenticación válido");try{const a=JSON.parse(atob(t.split(".")[1])),i=Math.floor(Date.now()/1e3);if(a.exp&&a.exp<i)throw new Error("El token de autenticación ha expirado")}catch{}pe=t,A.value="connecting",O.value=null;const s=!1;let o;s||(o=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`);const r=new URL(o);return r.searchParams.set("token",t),new Promise((a,i)=>{try{b=new WebSocket(r.toString()),b.binaryType="arraybuffer";const l=setTimeout(()=>{if(b&&b.readyState===WebSocket.CONNECTING){b.close(4e3,"Connection timeout");const u="Tiempo de conexión agotado";O.value=new Error(u),A.value="error",i(new Error(u))}},15e3);b.onopen=()=>{clearTimeout(l),oe.value=!0,A.value="connected",re=0,this.emit(B.CONNECT,{type:B.CONNECT}),a(!0)},b.onclose=u=>{clearTimeout(l),oe.value=!1,u.code===1e3?A.value="disconnected":u.code===4e3?(A.value="error",O.value=new Error("Tiempo de conexión agotado")):u.code===1006?(A.value="error",O.value=new Error("Conexión cerrada inesperadamente")):u.code===1008?(A.value="error",O.value=new Error("Token de autenticación inválido o expirado")):(A.value="error",O.value=new Error(`Conexión cerrada con código: ${u.code}`)),u.code!==1e3&&u.code!==1001&&u.code!==1008&&(O.value=new Error(`Conexión cerrada: ${u.reason||"Código: "+u.code}`),this._scheduleReconnect()),this.emit(B.DISCONNECT,{type:B.DISCONNECT,code:u.code,reason:u.reason,wasClean:u.wasClean})},b.onerror=u=>{O.value=new Error("Error en la conexión WebSocket"),this.emit(B.ERROR,{type:B.ERROR,error:u}),A.value==="connecting"&&i(new Error("Error en la conexión WebSocket"))},b.onmessage=u=>{try{const v=typeof u.data=="string"?JSON.parse(u.data):u.data;this.emit(v.type||"message",v)}catch{}}}catch(l){O.value=l instanceof Error?l:new Error("Error al crear la conexión WebSocket"),A.value="error",i(l)}})}catch(s){throw A.value="error",O.value=s instanceof Error?s:new Error(String(s)),O.value}},disconnect(){if(b)try{(b.readyState===WebSocket.OPEN||b.readyState===WebSocket.CONNECTING)&&b.close(1e3,"User disconnected"),b.onopen=null,b.onclose=null,b.onerror=null,b.onmessage=null,b=null}catch{}W&&(clearTimeout(W),W=null),A.value="disconnected",oe.value=!1},async send(t){if(!b)throw new Error("WebSocket no inicializado");if(b.readyState!==WebSocket.OPEN)throw new Error("WebSocket no está conectado");const s=typeof t=="string"?t:JSON.stringify(t);b.send(s)},get currentStatus(){return A.value},get isConnected(){return oe.value},get currentError(){return O.value},cleanup(){Dt()},useWebSocket(){const t=()=>{Object.values(B).forEach(s=>{J[s].clear()})};return{connect:D.connect.bind(D),disconnect:D.disconnect.bind(D),send:D.send.bind(D),addEventListener:D.addEventListener.bind(D),removeEventListener:D.removeEventListener.bind(D),cleanup:t,status:ue(A),isConnected:ue(oe),error:ue(O)}}},Ut=D.useWebSocket.bind(D),Vt=["title"],qt={class:"status-text"},Ft=Ae({__name:"SystemStatusBadge",setup(t){const s=G(),{status:o,error:r,connect:a,disconnect:i,cleanup:l}=Ut(),u=x(null),v=I(()=>{switch(o.value){case"connected":return"Connected";case"connecting":return"Connecting...";case"reconnecting":return"Reconnecting...";case"error":return"Connection Error";default:return"Disconnected"}}),h=I(()=>({"status-connected":o.value==="connected","status-connecting":o.value==="connecting","status-reconnecting":o.value==="reconnecting","status-error":o.value==="error","status-disconnected":o.value==="disconnected"})),n=I(()=>r.value?`Error: ${r.value.message}`:u.value?`Error: ${u.value.message}`:v.value);ge(r,d=>{d&&(u.value=d)});const g=()=>{try{if(!s)return;s.isAuthenticated&&s.token&&a(s.token).catch(d=>{const E=d instanceof Error?d:new Error(String(d));u.value=E,E.message.includes("Network error")||E.message.includes("Tiempo de conexión agotado")})}catch(d){const E=d instanceof Error?d:new Error(String(d));u.value=E}};return ge(()=>s.token,(d,E)=>{try{if(!d&&E){i();return}d&&s.isAuthenticated&&a(d).catch(C=>{const M=C instanceof Error?C:new Error(String(C));u.value=M})}catch(C){const M=C instanceof Error?C:new Error(String(C));u.value=M}},{immediate:!0}),H(()=>{g()}),ve(()=>{l()}),(d,E)=>(m(),f("div",{class:T(["system-status-badge",h.value]),title:n.value},[E[0]||(E[0]=e("span",{class:"status-dot"},null,-1)),e("span",qt,w(v.value),1)],10,Vt))}});const Bt=q(Ft,[["__scopeId","data-v-09c05868"]]),Ht="/images/zues-3d-main.png";const Zt={class:"zeus-3d-container relative flex flex-col items-center justify-center h-full w-full"},Jt={__name:"Zeus3D",setup(t){const s=Z(),o=G(),r=x(!0),a=()=>{s.push("/perfil")},i=()=>{s.push("/dashboard")},l=()=>{alert("Estado del sistema: conectado")},u=()=>{r.value=!r.value},v=async()=>{await o.logout(),s.push("/login")};return(h,n)=>(m(),f("div",Zt,[n[5]||(n[5]=e("img",{src:Ht,alt:"ZEUS IA Zeus",class:"zeus-3d-image rounded-xl shadow-lg object-cover",draggable:"false"},null,-1)),e("div",{class:"zeus-3d-buttons absolute inset-0 flex flex-col items-end justify-between p-6 pointer-events-none"},[e("div",{class:"flex flex-col space-y-4 mt-2 pointer-events-auto"},[e("button",{onClick:a,class:"zeus-btn",title:"Perfil de usuario"},n[0]||(n[0]=[e("i",{class:"fas fa-user-circle"},null,-1)])),e("button",{onClick:i,class:"zeus-btn",title:"Panel de control"},n[1]||(n[1]=[e("i",{class:"fas fa-tachometer-alt"},null,-1)])),e("button",{onClick:l,class:"zeus-btn",title:"Estado del sistema"},n[2]||(n[2]=[e("i",{class:"fas fa-signal"},null,-1)])),e("button",{onClick:u,class:"zeus-btn",title:"Vista 3D"},n[3]||(n[3]=[e("i",{class:"fas fa-cube"},null,-1)]))]),e("div",{class:"flex flex-col pointer-events-auto"},[e("button",{onClick:v,class:"zeus-btn",title:"Cerrar sesión"},n[4]||(n[4]=[e("i",{class:"fas fa-sign-out-alt"},null,-1)]))])])]))}},Kt=q(Jt,[["__scopeId","data-v-d3f707c0"]]);const Wt={class:"bg-white overflow-hidden shadow rounded-lg"},Yt={class:"p-5"},Gt={class:"flex items-center"},Xt={key:1,class:"h-6 w-6"},Qt={class:"ml-5 w-0 flex-1"},es={class:"text-sm font-medium text-gray-500 truncate"},ts={class:"text-lg font-medium text-gray-900"},ss={key:0,class:"mt-4 flex items-center"},os={key:1,class:"mt-4"},rs={__name:"DashboardMetric",props:{title:{type:String,required:!0},value:{type:[String,Number],required:!0},icon:{type:String,required:!0},trend:{type:String,validator:t=>["up","down",null,void 0].includes(t),default:null},trendValue:{type:String,default:""},loading:{type:Boolean,default:!1}},setup(t){return(s,o)=>(m(),f("div",Wt,[e("div",Yt,[e("div",Gt,[e("div",{class:T(["flex-shrink-0 rounded-md p-3",{"bg-indigo-100":!t.loading,"bg-gray-200":t.loading,"animate-pulse":t.loading}])},[t.loading?(m(),f("div",Xt)):(m(),f("i",{key:0,class:T(["fas",`fa-${t.icon}`,"text-indigo-600 text-lg"])},null,2))],2),e("div",Qt,[e("dl",null,[e("dt",es,w(t.loading?"Cargando...":t.title),1),e("dd",null,[e("div",ts,w(t.loading?"...":t.value),1)])])])]),!t.loading&&t.trend?(m(),f("div",ss,[e("span",{class:T(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",t.trend==="up"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},[e("i",{class:T(["mr-1",t.trend==="up"?"fa-arrow-up":"fa-arrow-down"])},null,2),P(" "+w(t.trendValue),1)],2),o[0]||(o[0]=e("span",{class:"ml-2 text-sm text-gray-500"}," vs. período anterior ",-1))])):t.loading?(m(),f("div",os,o[1]||(o[1]=[e("div",{class:"h-4 bg-gray-200 rounded w-3/4"},null,-1)]))):$("",!0)])]))}},ns=q(rs,[["__scopeId","data-v-b4acc032"]]);const as={class:"dashboard"},is={key:0,class:"fixed inset-0 bg-white bg-opacity-75 flex items-center justify-center z-50"},ls={key:1,class:"fixed inset-0 bg-white flex items-center justify-center z-50"},ds={class:"text-center p-6 max-w-md mx-auto"},cs={class:"mt-2 text-sm text-gray-500"},us={class:"mt-5"},ms={class:"bg-white shadow"},fs={class:"max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8 flex justify-between items-center"},ps={class:"flex items-center space-x-4"},gs={class:"relative"},vs={class:"hidden md:inline text-sm font-medium text-gray-700"},hs={key:0,class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50",role:"menu",tabindex:"-1"},_s={class:"py-1",role:"none"},xs={class:"max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8"},ws={class:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-8"},ys={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8"},bs={class:"lg:col-span-2 bg-white rounded-lg shadow p-6"},ks={class:"flex justify-between items-center mb-4"},Es={class:"flex space-x-2"},$s=["onClick"],Ts={class:"h-64"},Ss={class:"bg-white rounded-lg shadow overflow-hidden"},Cs={class:"p-6"},Rs={class:"h-64"},As={class:"bg-white shadow overflow-hidden sm:rounded-lg"},Ls={class:"overflow-x-auto"},Ps={class:"min-w-full divide-y divide-gray-200"},Is={class:"bg-white divide-y divide-gray-200"},zs={class:"px-6 py-4 whitespace-nowrap"},Ns={class:"flex items-center"},js={class:"flex-shrink-0 h-10 w-10"},Ms={class:"ml-4"},Os={class:"text-sm font-medium text-gray-900"},Ds={class:"text-sm text-gray-500"},Us={class:"px-6 py-4 whitespace-nowrap"},Vs={class:"text-sm text-gray-900"},qs={class:"px-6 py-4 whitespace-nowrap"},Fs={class:"text-sm text-gray-500"},Bs={class:"px-6 py-4 whitespace-nowrap"},Hs={key:0},Zs={__name:"Dashboard",setup(t){me.register(...Ve);const s=G(),o=Z(),r=x("día"),a=x(!1),i=x(!0),l=x(null),u=x(null);x(null);const v=x(null),h=x([{title:"Ventas Hoy",value:"1,245",icon:"shopping-cart",trend:"up",trendValue:"12%",loading:!1},{title:"Ingresos",value:"$12,548",icon:"dollar-sign",trend:"down",trendValue:"3%"},{title:"Clientes Nuevos",value:"24",icon:"users",trend:"up",trendValue:"8%"},{title:"Órdenes",value:"156",icon:"box",trend:"up",trendValue:"5%"}]),n=x([{id:1,title:"Nueva orden creada",description:"Orden #1001 por $125.75",type:"order",user:"Juan Pérez",timestamp:new Date,status:"completed"},{id:2,title:"Error de pago",description:"Error al procesar el pago #1002",type:"error",user:"María García",timestamp:fe(new Date,1),status:"error"},{id:3,title:"Nuevo cliente registrado",description:"Carlos López se ha registrado",type:"user",user:"Sistema",timestamp:fe(new Date,2),status:"completed"}]),g={order:"fas fa-shopping-cart",error:"fas fa-exclamation-circle",user:"fas fa-user-plus",system:"fas fa-cog"},d=I(()=>s.userFullName||"Usuario"),E=c=>{if(!c)return"";try{const p=typeof c=="string"?new Date(c):c;return we(p,"dd/MM/yyyy HH:mm",{locale:ye})}catch{return"Fecha inválida"}},C=async()=>{try{await s.logout(),o.push("/login")}catch{}},M=c=>{const p=document.querySelector(".user-menu"),S=document.querySelector('[aria-expanded="true"]');p&&S&&!p.contains(c.target)&&!S.contains(c.target)&&(a.value=!1)},_=()=>{if(v.value){const c=me.getChart(v.value);c&&c.destroy()}if(v.value){const c=v.value.getContext("2d");new me(c,{type:"line",data:{labels:Array.from({length:7},(p,S)=>{const y=fe(new Date,6-S);return we(y,"EEE",{locale:ye})}),datasets:[{label:"Ventas",data:[12,19,3,5,2,3,15],borderColor:"rgb(79, 70, 229)",backgroundColor:"rgba(79, 70, 229, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,grid:{display:!0,drawBorder:!1},ticks:{stepSize:5}},x:{grid:{display:!1,drawBorder:!1}}}}})}};return ge(r,c=>{}),H(()=>{(async()=>{try{if(i.value=!0,l.value=null,!s.isAuthenticated&&!await s.refreshAccessToken())throw new Error("Sesión expirada. Por favor, inicia sesión nuevamente.");try{u.value=await _e.getCurrentUser()}catch(p){if(s.user)u.value=s.user;else throw p}await Promise.all([]),Fe(()=>{_()})}catch(p){l.value=p.response?.data?.message||p.message||"Error al cargar los datos del dashboard",(p.response?.status===401||p.message.includes("Sesión expirada"))&&(s.logout(),o.push("/login"))}finally{i.value=!1}})(),document.addEventListener("click",M)}),ve(()=>{document.removeEventListener("click",M)}),(c,p)=>{const S=F("router-link");return m(),f("div",as,[i.value?(m(),f("div",is,p[4]||(p[4]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),e("p",{class:"mt-4 text-gray-700"},"Cargando datos del dashboard...")],-1)]))):l.value?(m(),f("div",ls,[e("div",ds,[p[7]||(p[7]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[e("i",{class:"fas fa-exclamation-triangle text-red-600 text-xl"})],-1)),p[8]||(p[8]=e("h3",{class:"mt-3 text-lg font-medium text-gray-900"},"Error al cargar el dashboard",-1)),e("p",cs,w(l.value),1),e("div",us,[e("button",{onClick:p[0]||(p[0]=(...y)=>c.retryLoading&&c.retryLoading(...y)),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},p[5]||(p[5]=[e("i",{class:"fas fa-sync-alt mr-2"},null,-1),P(" Reintentar ")])),e("button",{onClick:p[1]||(p[1]=y=>qe(s).logout()),class:"ml-3 inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},p[6]||(p[6]=[e("i",{class:"fas fa-sign-out-alt mr-2"},null,-1),P(" Cerrar sesión ")]))])])])):$("",!0),e("header",ms,[e("div",fs,[p[12]||(p[12]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Panel de Control",-1)),e("div",ps,[L(Bt),e("div",gs,[e("button",{onClick:p[2]||(p[2]=y=>a.value=!a.value),class:"flex items-center space-x-2 focus:outline-none"},[p[9]||(p[9]=e("span",{class:"inline-block h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center"},[e("i",{class:"fas fa-user text-indigo-600"})],-1)),e("span",vs,w(d.value),1)]),a.value?(m(),f("div",hs,[e("div",_s,[L(S,{to:"/perfil",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:p[3]||(p[3]=y=>a.value=!1)},{default:V(()=>p[10]||(p[10]=[e("i",{class:"fas fa-user-circle mr-2"},null,-1),P(" Perfil ")])),_:1,__:[10]}),e("button",{onClick:C,class:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem"},p[11]||(p[11]=[e("i",{class:"fas fa-sign-out-alt mr-2"},null,-1),P(" Cerrar sesión ")]))])])):$("",!0)])])])]),e("main",xs,[e("div",ws,[(m(!0),f(ne,null,le(h.value,y=>(m(),Pe(ns,{key:y.title,title:y.title,value:y.value,icon:y.icon,trend:y.trend,"trend-value":y.trendValue,loading:i.value},null,8,["title","value","icon","trend","trend-value","loading"]))),128))]),e("div",ys,[e("div",bs,[e("div",ks,[p[13]||(p[13]=e("h2",{class:"text-lg font-medium text-gray-900"},"Ventas Recientes",-1)),e("div",Es,[(m(),f(ne,null,le(["Día","Semana","Mes"],y=>e("button",{key:y,onClick:z=>r.value=y.toLowerCase(),class:T(["px-3 py-1 text-sm rounded-md",{"bg-indigo-100 text-indigo-700":r.value===y.toLowerCase(),"text-gray-500 hover:bg-gray-100":r.value!==y.toLowerCase()}])},w(y),11,$s)),64))])]),e("div",Ts,[e("canvas",{ref_key:"salesChart",ref:v},null,512)])]),e("div",Ss,[e("div",Cs,[p[14]||(p[14]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Vista 3D",-1)),e("div",Rs,[L(Kt,{class:"h-full w-full"})])])])]),e("div",As,[p[17]||(p[17]=e("div",{class:"px-4 py-5 sm:px-6 border-b border-gray-200"},[e("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Actividad Reciente"),e("p",{class:"mt-1 max-w-2xl text-sm text-gray-500"}," Últimas actividades en el sistema ")],-1)),e("div",Ls,[e("table",Ps,[p[16]||(p[16]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actividad "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Usuario "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Fecha "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Estado ")])],-1)),e("tbody",Is,[(m(!0),f(ne,null,le(n.value,(y,z)=>(m(),f("tr",{key:z},[e("td",zs,[e("div",Ns,[e("div",js,[e("i",{class:T([g[y.type],"text-indigo-600 text-lg"])},null,2)]),e("div",Ms,[e("div",Os,w(y.title),1),e("div",Ds,w(y.description),1)])])]),e("td",Us,[e("div",Vs,w(y.user),1)]),e("td",qs,[e("div",Fs,w(E(y.timestamp)),1)]),e("td",Bs,[e("span",{class:T(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",y.status==="completed"?"bg-green-100 text-green-800":y.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"])},w(y.status==="completed"?"Completado":y.status==="pending"?"Pendiente":"Error"),3)])]))),128)),n.value.length===0?(m(),f("tr",Hs,p[15]||(p[15]=[e("td",{colspan:"4",class:"px-6 py-4 text-center text-sm text-gray-500"}," No hay actividades recientes ",-1)]))):$("",!0)])])])])])])}}},Js=q(Zs,[["__scopeId","data-v-029e61fb"]]),Ks={key:0,class:"bg-red-50 border-l-4 border-red-400 p-4 mb-6"},Ws={class:"flex"},Ys={class:"ml-3"},Gs={class:"text-sm text-red-700 whitespace-pre-line"},Xs={class:"rounded-md shadow-sm -space-y-px"},Qs=["disabled"],eo=["disabled"],to={class:"flex items-center justify-between"},so={class:"flex items-center"},oo=["disabled"],ro=["disabled"],no={key:0},ao={key:1},io={__name:"Login",setup(t){const s=Z(),o=Y(),r=G(),a=x({email:"",password:"",rememberMe:!1}),i=x(""),l=x(!1),u=o.query.redirect||"/";H(()=>{r.isAuthenticated&&s.push(u)});const v=()=>{const n={};return a.value.email?/\S+@\S+\.\S+/.test(a.value.email)||(n.email="El correo electrónico no es válido"):n.email="El correo electrónico es obligatorio",a.value.password?a.value.password.length<6&&(n.password="La contraseña debe tener al menos 6 caracteres"):n.password="La contraseña es obligatoria",Object.keys(n).length===0?!0:n},h=async()=>{const n=v();if(n!==!0){i.value=Object.values(n).join(`
`),alert("Error de validación: "+i.value);return}l.value=!0,i.value="";try{const g=await r.login(a.value.email,a.value.password);if(g.success){if(alert("Login exitoso, recargando estado y redirigiendo..."),await r.initialize(),!localStorage.getItem("auth_token"))throw alert("No se pudo guardar el token de autenticación"),new Error("No se pudo guardar el token de autenticación");setTimeout(()=>{s.push(u)},100)}else{let d=g.error||g.message||"Error al iniciar sesión. Por favor, verifica tus credenciales.";typeof d!="string"&&(d=JSON.stringify(d)),i.value=d,alert("Error en login: "+d)}}catch(g){let d=g.message||"Ocurrió un error al intentar iniciar sesión. Por favor, inténtalo de nuevo.";typeof d!="string"&&(d=JSON.stringify(d)),i.value=d,alert("Error inesperado en login: "+d)}finally{l.value=!1}};return(n,g)=>(m(),f("div",null,[i.value?(m(),f("div",Ks,[e("div",Ws,[g[3]||(g[3]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z","clip-rule":"evenodd"})])],-1)),e("div",Ys,[e("p",Gs,w(i.value),1)])])])):$("",!0),e("form",{class:"space-y-6",onSubmit:ae(h,["prevent"])},[e("div",Xs,[e("div",null,[g[4]||(g[4]=e("label",{for:"email-address",class:"sr-only"},"Correo electrónico",-1)),j(e("input",{id:"email-address","onUpdate:modelValue":g[0]||(g[0]=d=>a.value.email=d),name:"email",type:"email",autocomplete:"email",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Correo electrónico",disabled:l.value},null,8,Qs),[[U,a.value.email]])]),e("div",null,[g[5]||(g[5]=e("label",{for:"password",class:"sr-only"},"Contraseña",-1)),j(e("input",{id:"password","onUpdate:modelValue":g[1]||(g[1]=d=>a.value.password=d),name:"password",type:"password",autocomplete:"current-password",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",disabled:l.value},null,8,eo),[[U,a.value.password]])])]),e("div",to,[e("div",so,[j(e("input",{id:"remember-me","onUpdate:modelValue":g[2]||(g[2]=d=>a.value.rememberMe=d),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",disabled:l.value},null,8,oo),[[Ie,a.value.rememberMe]]),g[6]||(g[6]=e("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Recordar sesión ",-1))]),g[7]||(g[7]=e("div",{class:"text-sm"},[e("a",{href:"#",class:"font-medium text-indigo-600 hover:text-indigo-500"}," ¿Olvidaste tu contraseña? ")],-1))]),e("div",null,[e("button",{type:"submit",class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",disabled:l.value},[g[8]||(g[8]=e("span",{class:"absolute left-0 inset-y-0 flex items-center pl-3"},[e("svg",{class:"h-5 w-5 text-indigo-500 group-hover:text-indigo-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z","clip-rule":"evenodd"})])],-1)),l.value?(m(),f("span",ao,"Iniciando sesión...")):(m(),f("span",no,"Iniciar sesión"))],8,ro)])],32)]))}};const lo={class:"space-y-6"},co={key:0,class:"bg-red-50 border-l-4 border-red-400 p-4 mb-6"},uo={class:"flex"},mo={class:"ml-3"},fo={class:"text-sm text-red-700"},po={class:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6"},go={class:"sm:col-span-3"},vo={class:"mt-1"},ho={key:0,class:"mt-2 text-sm text-red-600"},_o={class:"sm:col-span-3"},xo={class:"mt-1"},wo={key:0,class:"mt-2 text-sm text-red-600"},yo={class:"sm:col-span-6"},bo={class:"mt-1"},ko={key:0,class:"mt-2 text-sm text-red-600"},Eo={class:"sm:col-span-6"},$o={class:"mt-1"},To={key:0,class:"mt-2 text-sm text-red-600"},So={class:"sm:col-span-6"},Co={class:"mt-1"},Ro={key:0,class:"mt-2 text-sm text-red-600"},Ao={class:"sm:col-span-6"},Lo={class:"flex items-start"},Po={class:"flex items-center h-5"},Io={class:"ml-3 text-sm"},zo={key:0,class:"mt-2 text-sm text-red-600"},No=["disabled"],jo={key:0},Mo={key:1,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Oo={class:"mt-6"},Do={class:"mt-6"},Uo={__name:"Register",setup(t){const s=Z(),o=Y(),r=x(!1),a=x(""),i=ee({first_name:"",last_name:"",email:"",password:"",password_confirmation:"",terms:!1}),l=ee({first_name:"",last_name:"",email:"",password:"",password_confirmation:"",terms:""});H(()=>{o.query.email&&(i.email=o.query.email)});const u=()=>{let h=!0;return Object.keys(l).forEach(n=>{l[n]=""}),i.first_name.trim()||(l.first_name="El nombre es obligatorio",h=!1),i.last_name.trim()||(l.last_name="El apellido es obligatorio",h=!1),i.email?/\S+@\S+\.\S+/.test(i.email)||(l.email="El correo electrónico no es válido",h=!1):(l.email="El correo electrónico es obligatorio",h=!1),i.password?i.password.length<8?(l.password="La contraseña debe tener al menos 8 caracteres",h=!1):/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(i.password)||(l.password="La contraseña debe contener al menos una letra mayúscula, una minúscula y un número",h=!1):(l.password="La contraseña es obligatoria",h=!1),i.password!==i.password_confirmation&&(l.password_confirmation="Las contraseñas no coinciden",h=!1),i.terms||(l.terms="Debes aceptar los términos y condiciones",h=!1),h},v=async()=>{if(u()){r.value=!0,a.value="";try{await new Promise(h=>setTimeout(h,1500)),s.push({name:"Login",query:{email:i.email,registered:"true"}})}catch(h){a.value=h.response?.data?.message||"Ocurrió un error al registrar la cuenta. Por favor, inténtalo de nuevo."}finally{r.value=!1}}};return(h,n)=>{const g=F("router-link");return m(),f("div",lo,[a.value?(m(),f("div",co,[e("div",uo,[n[6]||(n[6]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z","clip-rule":"evenodd"})])],-1)),e("div",mo,[e("p",fo,w(a.value),1)])])])):$("",!0),e("form",{class:"space-y-6",onSubmit:ae(v,["prevent"])},[e("div",po,[e("div",go,[n[7]||(n[7]=e("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"}," Nombre ",-1)),e("div",vo,[j(e("input",{id:"first_name","onUpdate:modelValue":n[0]||(n[0]=d=>i.first_name=d),name:"first_name",type:"text",autocomplete:"given-name",required:"",class:T(["appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",{"border-red-300":l.first_name}])},null,2),[[U,i.first_name]]),l.first_name?(m(),f("p",ho,w(l.first_name),1)):$("",!0)])]),e("div",_o,[n[8]||(n[8]=e("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"}," Apellido ",-1)),e("div",xo,[j(e("input",{id:"last_name","onUpdate:modelValue":n[1]||(n[1]=d=>i.last_name=d),name:"last_name",type:"text",autocomplete:"family-name",required:"",class:T(["appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",{"border-red-300":l.last_name}])},null,2),[[U,i.last_name]]),l.last_name?(m(),f("p",wo,w(l.last_name),1)):$("",!0)])]),e("div",yo,[n[9]||(n[9]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"}," Correo electrónico ",-1)),e("div",bo,[j(e("input",{id:"email","onUpdate:modelValue":n[2]||(n[2]=d=>i.email=d),name:"email",type:"email",autocomplete:"email",required:"",class:T(["appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",{"border-red-300":l.email}])},null,2),[[U,i.email]]),l.email?(m(),f("p",ko,w(l.email),1)):$("",!0)])]),e("div",Eo,[n[10]||(n[10]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Contraseña ",-1)),e("div",$o,[j(e("input",{id:"password","onUpdate:modelValue":n[3]||(n[3]=d=>i.password=d),name:"password",type:"password",autocomplete:"new-password",required:"",class:T(["appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",{"border-red-300":l.password}])},null,2),[[U,i.password]]),l.password?(m(),f("p",To,w(l.password),1)):$("",!0)])]),e("div",So,[n[11]||(n[11]=e("label",{for:"password_confirmation",class:"block text-sm font-medium text-gray-700"}," Confirmar contraseña ",-1)),e("div",Co,[j(e("input",{id:"password_confirmation","onUpdate:modelValue":n[4]||(n[4]=d=>i.password_confirmation=d),name:"password_confirmation",type:"password",autocomplete:"new-password",required:"",class:T(["appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",{"border-red-300":l.password_confirmation}])},null,2),[[U,i.password_confirmation]]),l.password_confirmation?(m(),f("p",Ro,w(l.password_confirmation),1)):$("",!0)])]),e("div",Ao,[e("div",Lo,[e("div",Po,[j(e("input",{id:"terms","onUpdate:modelValue":n[5]||(n[5]=d=>i.terms=d),name:"terms",type:"checkbox",class:T(["focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded",{"border-red-300":l.terms}]),required:""},null,2),[[Ie,i.terms]])]),e("div",Io,[n[12]||(n[12]=e("label",{for:"terms",class:"font-medium text-gray-700"},[P(" Acepto los "),e("a",{href:"#",class:"text-indigo-600 hover:text-indigo-500"},"Términos de servicio"),P(" y la "),e("a",{href:"#",class:"text-indigo-600 hover:text-indigo-500"},"Política de privacidad")],-1)),l.terms?(m(),f("p",zo,w(l.terms),1)):$("",!0)])])])]),e("div",null,[e("button",{type:"submit",class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",disabled:r.value},[r.value?(m(),f("svg",Mo,n[13]||(n[13]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(m(),f("span",jo,"Crear cuenta"))],8,No)])],32),e("div",Oo,[n[15]||(n[15]=he('<div class="relative" data-v-0625c8ec><div class="absolute inset-0 flex items-center" data-v-0625c8ec><div class="w-full border-t border-gray-300" data-v-0625c8ec></div></div><div class="relative flex justify-center text-sm" data-v-0625c8ec><span class="px-2 bg-gray-100 text-gray-500" data-v-0625c8ec> ¿Ya tienes una cuenta? </span></div></div>',1)),e("div",Do,[L(g,{to:"/auth/login",class:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:V(()=>n[14]||(n[14]=[P(" Iniciar sesión ")])),_:1,__:[14]})])])])}}},Vo=q(Uo,[["__scopeId","data-v-0625c8ec"]]);const qo={class:"space-y-6"},Fo={key:0,class:"bg-green-50 border-l-4 border-green-400 p-4 mb-6"},Bo={class:"flex"},Ho={class:"ml-3"},Zo={class:"text-sm text-green-700"},Jo={key:1},Ko={key:0,class:"bg-red-50 border-l-4 border-red-400 p-4 mb-6"},Wo={class:"flex"},Yo={class:"ml-3"},Go={class:"text-sm text-red-700"},Xo={class:"mt-1"},Qo={key:0,class:"mt-2 text-sm text-red-600"},er=["disabled"],tr={key:0},sr={key:1,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},or={class:"mt-6"},rr={class:"mt-6"},nr={__name:"ForgotPassword",setup(t){Z();const s=Y(),o=x(!1),r=x(""),a=x(""),i=ee({email:""}),l=ee({email:""});H(()=>{s.query.email&&(i.email=s.query.email),s.query.registered==="true"&&(a.value="¡Cuenta creada con éxito! Por favor, verifica tu correo electrónico para activar tu cuenta.")});const u=()=>{let h=!0;return l.email="",i.email?/\S+@\S+\.\S+/.test(i.email)||(l.email="El correo electrónico no es válido",h=!1):(l.email="El correo electrónico es obligatorio",h=!1),h},v=async()=>{if(u()){o.value=!0,r.value="";try{await new Promise(h=>setTimeout(h,1500)),a.value="Hemos enviado un correo electrónico con instrucciones para restablecer tu contraseña. Por favor, revisa tu bandeja de entrada."}catch(h){r.value=h.response?.data?.message||"Ocurrió un error al procesar tu solicitud. Por favor, inténtalo de nuevo."}finally{o.value=!1}}};return(h,n)=>{const g=F("router-link");return m(),f("div",qo,[a.value?(m(),f("div",Fo,[e("div",Bo,[n[1]||(n[1]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),e("div",Ho,[e("p",Zo,w(a.value),1)])])])):(m(),f("div",Jo,[n[5]||(n[5]=e("div",{class:"text-center"},[e("h2",{class:"text-2xl font-bold text-gray-900"},"¿Olvidaste tu contraseña?"),e("p",{class:"mt-2 text-sm text-gray-600"}," Ingresa tu correo electrónico y te enviaremos un enlace para restablecer tu contraseña. ")],-1)),e("form",{class:"mt-8 space-y-6",onSubmit:ae(v,["prevent"])},[r.value?(m(),f("div",Ko,[e("div",Wo,[n[2]||(n[2]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z","clip-rule":"evenodd"})])],-1)),e("div",Yo,[e("p",Go,w(r.value),1)])])])):$("",!0),e("div",null,[n[3]||(n[3]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"}," Correo electrónico ",-1)),e("div",Xo,[j(e("input",{id:"email","onUpdate:modelValue":n[0]||(n[0]=d=>i.email=d),name:"email",type:"email",autocomplete:"email",required:"",class:T(["appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",{"border-red-300":l.email}])},null,2),[[U,i.email]]),l.email?(m(),f("p",Qo,w(l.email),1)):$("",!0)])]),e("div",null,[e("button",{type:"submit",class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",disabled:o.value},[o.value?(m(),f("svg",sr,n[4]||(n[4]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(m(),f("span",tr,"Enviar enlace de recuperación"))],8,er)])],32)])),e("div",or,[n[7]||(n[7]=he('<div class="relative" data-v-9413fa5e><div class="absolute inset-0 flex items-center" data-v-9413fa5e><div class="w-full border-t border-gray-300" data-v-9413fa5e></div></div><div class="relative flex justify-center text-sm" data-v-9413fa5e><span class="px-2 bg-gray-100 text-gray-500" data-v-9413fa5e> ¿Recordaste tu contraseña? </span></div></div>',1)),e("div",rr,[L(g,{to:"/auth/login",class:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:V(()=>n[6]||(n[6]=[P(" Volver al inicio de sesión ")])),_:1,__:[6]})])])])}}},ar=q(nr,[["__scopeId","data-v-9413fa5e"]]);const ir={class:"space-y-6"},lr={key:0,class:"bg-green-50 border-l-4 border-green-400 p-4 mb-6"},dr={class:"flex"},cr={class:"ml-3"},ur={class:"text-sm text-green-700"},mr={class:"mt-4"},fr={key:0,class:"bg-red-50 border-l-4 border-red-400 p-4 mb-6"},pr={class:"flex"},gr={class:"ml-3"},vr={class:"text-sm text-red-700"},hr={class:"mt-1"},_r={key:0,class:"mt-2 text-sm text-red-600"},xr={class:"mt-1"},wr={key:0,class:"mt-2 text-sm text-red-600"},yr=["disabled"],br={key:0},kr={key:1,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Er={key:2,class:"mt-6"},$r={class:"mt-6"},Tr={__name:"ResetPassword",setup(t){Z();const s=Y(),o=x(!1),r=x(""),a=x(!1),i=x(""),l=x(""),u=ee({password:"",password_confirmation:""}),v=ee({password:"",password_confirmation:""});H(()=>{l.value=s.params.token,l.value||(r.value="Token de restablecimiento no válido o faltante")});const h=()=>{let g=!0;return v.password="",v.password_confirmation="",u.password?u.password.length<8?(v.password="La contraseña debe tener al menos 8 caracteres",g=!1):/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(u.password)||(v.password="La contraseña debe contener al menos una letra mayúscula, una minúscula y un número",g=!1):(v.password="La contraseña es obligatoria",g=!1),u.password!==u.password_confirmation&&(v.password_confirmation="Las contraseñas no coinciden",g=!1),g},n=async()=>{if(h()){o.value=!0,r.value="";try{await new Promise(g=>setTimeout(g,1500)),a.value=!0,i.value="¡Tu contraseña ha sido restablecida con éxito! Ahora puedes iniciar sesión con tu nueva contraseña."}catch(g){r.value=g.response?.data?.message||"Ocurrió un error al restablecer tu contraseña. Por favor, inténtalo de nuevo."}finally{o.value=!1}}};return(g,d)=>{const E=F("router-link");return m(),f("div",ir,[d[10]||(d[10]=e("div",{class:"text-center"},[e("h2",{class:"text-2xl font-bold text-gray-900"},"Restablecer contraseña"),e("p",{class:"mt-2 text-sm text-gray-600"}," Ingresa tu nueva contraseña para continuar. ")],-1)),a.value?(m(),f("div",lr,[e("div",dr,[d[2]||(d[2]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),e("div",cr,[e("p",ur,w(i.value),1)])]),e("div",mr,[L(E,{to:"/auth/login",class:"font-medium text-indigo-600 hover:text-indigo-500"},{default:V(()=>d[3]||(d[3]=[P(" Volver al inicio de sesión → ")])),_:1,__:[3]})])])):(m(),f("form",{key:1,class:"space-y-6",onSubmit:ae(n,["prevent"])},[r.value?(m(),f("div",fr,[e("div",pr,[d[4]||(d[4]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z","clip-rule":"evenodd"})])],-1)),e("div",gr,[e("p",vr,w(r.value),1)])])])):$("",!0),e("div",null,[d[5]||(d[5]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Nueva contraseña ",-1)),e("div",hr,[j(e("input",{id:"password","onUpdate:modelValue":d[0]||(d[0]=C=>u.password=C),type:"password",autocomplete:"new-password",required:"",class:T(["appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",{"border-red-300":v.password}])},null,2),[[U,u.password]]),v.password?(m(),f("p",_r,w(v.password),1)):$("",!0)])]),e("div",null,[d[6]||(d[6]=e("label",{for:"password_confirmation",class:"block text-sm font-medium text-gray-700"}," Confirmar nueva contraseña ",-1)),e("div",xr,[j(e("input",{id:"password_confirmation","onUpdate:modelValue":d[1]||(d[1]=C=>u.password_confirmation=C),type:"password",autocomplete:"new-password",required:"",class:T(["appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",{"border-red-300":v.password_confirmation}])},null,2),[[U,u.password_confirmation]]),v.password_confirmation?(m(),f("p",wr,w(v.password_confirmation),1)):$("",!0)])]),e("div",null,[e("button",{type:"submit",class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",disabled:o.value},[o.value?(m(),f("svg",kr,d[7]||(d[7]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(m(),f("span",br,"Restablecer contraseña"))],8,yr)])],32)),a.value?$("",!0):(m(),f("div",Er,[d[9]||(d[9]=he('<div class="relative" data-v-e5443ee3><div class="absolute inset-0 flex items-center" data-v-e5443ee3><div class="w-full border-t border-gray-300" data-v-e5443ee3></div></div><div class="relative flex justify-center text-sm" data-v-e5443ee3><span class="px-2 bg-gray-100 text-gray-500" data-v-e5443ee3> ¿Recordaste tu contraseña? </span></div></div>',1)),e("div",$r,[L(E,{to:"/auth/login",class:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:V(()=>d[8]||(d[8]=[P(" Volver al inicio de sesión ")])),_:1,__:[8]})])]))])}}},Sr=q(Tr,[["__scopeId","data-v-e5443ee3"]]);const Cr={class:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},Rr={class:"sm:mx-auto sm:w-full sm:max-w-md"},Ar={class:"mt-6"},Lr={__name:"NotFound",setup(t){return Z(),(s,o)=>{const r=F("router-link");return m(),f("div",Cr,[e("div",Rr,[o[1]||(o[1]=e("h1",{class:"mt-6 text-center text-6xl font-extrabold text-gray-900"}," 404 ",-1)),o[2]||(o[2]=e("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Página no encontrada ",-1)),o[3]||(o[3]=e("p",{class:"mt-2 text-center text-sm text-gray-600"}," Lo sentimos, no pudimos encontrar la página que estás buscando. ",-1)),e("div",Ar,[L(r,{to:"/",class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:V(()=>o[0]||(o[0]=[P(" Volver al inicio ")])),_:1,__:[0]})])])])}}},Pr=q(Lr,[["__scopeId","data-v-2143f29a"]]),Ir={class:"max-w-4xl mx-auto p-6"},zr={class:"bg-white shadow rounded-lg p-6 mb-6"},Nr={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},jr={key:0},Mr={class:"text-lg font-semibold"},Or={class:"text-sm font-mono truncate"},Dr={class:"text-sm font-mono truncate"},Ur={key:0,class:"bg-white shadow rounded-lg p-6 mb-6"},Vr=["disabled"],qr={key:0},Fr={key:1,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Br={key:0,class:"mt-4 p-3 bg-red-50 text-red-700 rounded-md"},Hr={key:1,class:"space-y-6"},Zr={class:"bg-white shadow rounded-lg p-6"},Jr={key:0,class:"bg-gray-50 p-4 rounded-md"},Kr={class:"text-sm overflow-x-auto"},Wr={key:1,class:"text-center py-4"},Yr={key:2,class:"text-center py-4"},Gr={class:"mt-4"},Xr=["disabled"],Qr={key:0},en={key:1,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},tn={class:"bg-white shadow rounded-lg p-6"},sn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},on=["disabled"],rn={key:0},nn={key:1,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},an={__name:"AuthTest",setup(t){Z();const s=G(),o=x({email:"test@example.com",password:"password123"}),r=x(!1),a=x(!1),i=x(!1),l=x(""),u=x(null),v=I(()=>s.isAuthenticated),h=I(()=>s.user),n=I(()=>s.accessToken),g=I(()=>s.refreshToken),d=async()=>{try{r.value=!0,l.value="";const _=await s.login(o.value.email,o.value.password);_.success?o.value={email:"",password:""}:l.value=_.error||"Login failed"}catch{l.value="An error occurred during login"}finally{r.value=!1}},E=async()=>{try{await s.logout(),u.value=null}catch{}},C=async()=>{try{a.value=!0,await s.refreshAccessToken()}catch{}finally{a.value=!1}},M=async()=>{try{i.value=!0;const _=await system.testProtectedEndpoint();u.value=_.data}catch{u.value={error:"Failed to fetch protected data"}}finally{i.value=!1}};return H(()=>{v.value&&M()}),(_,c)=>(m(),f("div",Ir,[c[17]||(c[17]=e("h1",{class:"text-2xl font-bold mb-6"},"Authentication Test",-1)),e("div",zr,[c[6]||(c[6]=e("h2",{class:"text-lg font-medium mb-4"},"Authentication State",-1)),e("div",Nr,[e("div",null,[c[2]||(c[2]=e("p",{class:"text-sm font-medium text-gray-500"},"Is Authenticated",-1)),e("p",{class:T(["text-lg font-semibold",{"text-green-600":v.value,"text-red-600":!v.value}])},w(v.value?"Yes":"No"),3)]),h.value?(m(),f("div",jr,[c[3]||(c[3]=e("p",{class:"text-sm font-medium text-gray-500"},"User",-1)),e("p",Mr,w(h.value.email),1)])):$("",!0),e("div",null,[c[4]||(c[4]=e("p",{class:"text-sm font-medium text-gray-500"},"Access Token",-1)),e("p",Or,w(n.value?"••••••••"+n.value.slice(-8):"None"),1)]),e("div",null,[c[5]||(c[5]=e("p",{class:"text-sm font-medium text-gray-500"},"Refresh Token",-1)),e("p",Dr,w(g.value?"••••••••"+g.value.slice(-8):"None"),1)])])]),v.value?(m(),f("div",Hr,[e("div",Zr,[c[14]||(c[14]=e("h2",{class:"text-lg font-medium mb-4"},"Protected Data",-1)),u.value?(m(),f("div",Jr,[e("pre",Kr,w(JSON.stringify(u.value,null,2)),1)])):i.value?(m(),f("div",Wr,c[11]||(c[11]=[e("p",null,"Loading protected data...",-1)]))):(m(),f("div",Yr,c[12]||(c[12]=[e("p",null,"No data loaded. Click the button below to fetch protected data.",-1)]))),e("div",Gr,[e("button",{onClick:M,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",disabled:i.value},[i.value?(m(),f("svg",en,c[13]||(c[13]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(m(),f("span",Qr,"Fetch Protected Data"))],8,Xr)])]),e("div",tn,[c[16]||(c[16]=e("h2",{class:"text-lg font-medium mb-4"},"Token Actions",-1)),e("div",sn,[e("button",{onClick:C,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:a.value},[a.value?(m(),f("svg",nn,c[15]||(c[15]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(m(),f("span",rn,"Refresh Token"))],8,on),e("button",{onClick:E,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"}," Logout ")])])])):(m(),f("div",Ur,[c[10]||(c[10]=e("h2",{class:"text-lg font-medium mb-4"},"Login",-1)),e("form",{onSubmit:ae(d,["prevent"]),class:"space-y-4"},[e("div",null,[c[7]||(c[7]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),j(e("input",{id:"email","onUpdate:modelValue":c[0]||(c[0]=p=>o.value.email=p),type:"email",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[U,o.value.email]])]),e("div",null,[c[8]||(c[8]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Password",-1)),j(e("input",{id:"password","onUpdate:modelValue":c[1]||(c[1]=p=>o.value.password=p),type:"password",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[U,o.value.password]])]),e("div",null,[e("button",{type:"submit",class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",disabled:r.value},[r.value?(m(),f("svg",Fr,c[9]||(c[9]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(m(),f("span",qr,"Login"))],8,Vr)])],32),l.value?(m(),f("div",Br,w(l.value),1)):$("",!0)]))]))}};const Se=t=>t==null?"":encodeURIComponent(String(t)).replace(/%2F/g,"/").replace(/%20/g,"+").replace(/_/g,"%20"),Ce=t=>t==null?"":decodeURIComponent(String(t).replace(/\+/g," ")),ln=["Login","Register","ForgotPassword","ResetPassword","NotFound","AuthTest","WebSocketTest"],xe=Be({history:He("/"),scrollBehavior(t,s,o){return o||(t.hash?{el:t.hash,behavior:"smooth"}:{top:0,behavior:"smooth"})},stringifyQuery(t){const s=Object.keys(t).sort().map(o=>{const r=t[o];return r==null?"":`${Se(o)}=${Se(String(r))}`}).filter(Boolean).join("&");return s?`?${s}`:""},parseQuery:t=>{const s={};if(t=t.replace(/^\?/,""),!t)return s;for(const o of t.split("&")){const[r,a]=o.split("=");r&&(s[Ce(r)]=a?Ce(a):"")}return s},routes:[{path:"/",name:"LandingPage",component:()=>ke(()=>import("./LandingPage-38cb9970.js"),["assets/js/LandingPage-38cb9970.js","assets/js/vendor-f1ee3dc2.js","assets/css/LandingPage-389dfef0.css"]),meta:{title:"ZEUS IA - Tu Negocio Autónomo Inteligente",requiresAuth:!1,isLanding:!0}},{path:"/login",redirect:{name:"Login"}},{path:"/auth",component:wt,children:[{path:"login",name:"Login",component:io,meta:{title:"Iniciar sesión"}},{path:"register",name:"Register",component:Vo,meta:{title:"Crear cuenta"}},{path:"forgot-password",name:"ForgotPassword",component:ar,meta:{title:"Recuperar contraseña"}},{path:"reset-password/:token",name:"ResetPassword",component:Sr,meta:{title:"Restablecer contraseña"},props:!0},{path:"",redirect:{name:"Login"}}]},{path:"/",component:Ot,meta:{requiresAuth:!0},children:[{path:"dashboard",name:"Dashboard",component:Js,meta:{title:"Panel de control",icon:"fa-tachometer-alt",requiresAuth:!0}},{path:"",redirect:{name:"Dashboard"}}]},{path:"/auth-test",name:"AuthTest",component:an,meta:{title:"Prueba de Autenticación",requiresAuth:!1}},{path:"/websocket-test",name:"WebSocketTest",component:()=>ke(()=>import("./WebSocketTest-2cda52e5.js"),["assets/js/WebSocketTest-2cda52e5.js","assets/js/vendor-f1ee3dc2.js","assets/css/WebSocketTest-3c8ca337.css"]),meta:{title:"Prueba de WebSocket",requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"NotFound",component:Pr,meta:{title:"Página no encontrada"}}]});xe.beforeEach((t,s,o)=>{const r={};for(const[u,v]of Object.entries(t.params))typeof v=="string"?r[u]=decodeURIComponent(v):Array.isArray(v)?r[u]=v.map(h=>typeof h=="string"?decodeURIComponent(h):h):r[u]=v;if(JSON.stringify(r)!==JSON.stringify(t.params))return o({...t,params:r,hash:t.hash,query:t.query});const i=G().isAuthenticated,l=t.matched.some(u=>u.meta.requiresAuth);document.title=t.meta.title?`${t.meta.title} | ZEUS-IA`:"ZEUS-IA",l&&!i?o({name:"Login",query:{redirect:t.fullPath}}):i&&ln.includes(t.name)?o({name:"Dashboard"}):o()});xe.onError(t=>{});async function Re(){try{const t=Ze(Ye),s=Je();return t.use(s),t.use(xe),t.mount("#app"),t}catch(t){const s=document.createElement("div");throw s.style.position="fixed",s.style.top="0",s.style.left="0",s.style.right="0",s.style.padding="1rem",s.style.backgroundColor="#fef2f2",s.style.color="#dc2626",s.style.borderBottom="1px solid #fecaca",s.style.zIndex="9999",s.textContent="Error al cargar la aplicación. Por favor, recarga la página.",document.body.prepend(s),t}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{Re().catch(console.error)}):Re().catch(console.error);window.addEventListener("error",t=>{t.message&&t.message.includes("runtime.lastError")||t.message&&t.message.includes("Could not establish connection")||t instanceof Error});window.addEventListener("unhandledrejection",t=>{t.reason&&typeof t.reason=="string"&&t.reason.includes("runtime.lastError")||t.reason&&t.reason.message&&t.reason.message.includes("Could not establish connection")||t.reason instanceof Error});export{q as _,Ut as a,G as u};
